{"ast":null,"code":"/*----- Importaciones y dependencias -----*/import React,{useContext,useEffect,useState,useRef,useCallback}from'react';import{useParams}from'react-router-dom';import{AppContext}from'../../scripts/app_context';import{Routes,Route,Link,useLocation}from'react-router-dom';import{useDropzone}from'react-dropzone';import{request_userPosts,request_ProfileData,create_newPost,request_publicationComments,request_set_vote,create_newComment}from'../../scripts/server_com';/*----- Recursos multimedia -----*/import svg_icons from'../../icons/svg-resources.xml';/*----- Funciones Generales -----*/import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function formatedDate(dateString){const raw_date=new Date(dateString);const months=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];const formated_date=\"\".concat(raw_date.getDate().toString().padStart(2,'0'),\" de \").concat(months[raw_date.getMonth()],\" del \").concat(raw_date.getFullYear(),\" \\u2022 \").concat(raw_date.getHours(),\":\").concat(raw_date.getMinutes().toString().padStart(2,'0'));return formated_date;}function files_validation(element,picturesList){const acceptedFileTypes=['image/png','image/jpeg','image/webp'];const maxSize=5*1024*1024;// 5MB\nif(picturesList.length>9){console.log('maximo 9 archivos');return false;}else{if(!element){return false;}else if(!acceptedFileTypes.includes(element.type)){console.log('Archivo no válido (tipo MIME)');return false;}else if(element.size>maxSize){console.log('Archivo excede tamaño máximo');return false;}else{return true;}}}/*----- Componentes Auxiliares -----*/const TagsHandler=_ref=>{let{input_tags,fullMode=false}=_ref;let local_elements=[];if(!fullMode){input_tags.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){if(local_elements.length<3){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"tagLabel\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"#\",data]})},index));}else if(local_elements.length<4&&input_tags.length>=4){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"tagLabel\",children:/*#__PURE__*/_jsx(\"p\",{children:\"+\".concat(input_tags.length-3)})},4));}}});}else{input_tags.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"tagLabel\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"#\",data]})},index));}});}return local_elements;};const PointsHandler=_ref2=>{let{postsInfo_setter,input_points,input_id,input_userURL,authen_info}=_ref2;function handle_votes(vote_type){request_set_vote(authen_info,vote_type,input_userURL,input_id,(error,result)=>{if(error){console.log(error);}else{postsInfo_setter(prevDatos=>{if(Array.isArray(prevDatos)){const nuevosDatos=[...prevDatos];const index=nuevosDatos.findIndex(objeto=>objeto.id===input_id);if(index!==-1){const objeto=nuevosDatos[index];const nuevoObjeto={...objeto,points:{total:result.total,// Puedes cambiar esto por result.total si es necesario\ncurrent_user:result.current_user}};nuevosDatos[index]=nuevoObjeto;// Reemplazar el objeto en la lista\n}return nuevosDatos;}else if(typeof prevDatos==='object'&&!Array.isArray(prevDatos)){const nuevosDatos={...prevDatos,points:{total:result.total,current_user:result.current_user}};return nuevosDatos;}else{return prevDatos;}});}});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handle_votes(\"true\"),className:\"button iconed \".concat(input_points.current_user===\"true\"?'voted':''),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-pointer'})})}),/*#__PURE__*/_jsx(\"p\",{children:input_points.total}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handle_votes(\"false\"),className:\"button iconed down \".concat(input_points.current_user===\"false\"?'voted':''),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-pointer'})})})]});};const PublicationCommentsHandler=_ref3=>{let{input_postDataBasis,postsInfo_setter}=_ref3;const{auth,commonHost}=useContext(AppContext);const inputCommentRef=useRef(null);const[LocalData,setLocalData]=useState(null);const[localElements,setLocalElements]=useState([]);const[requesting,setRequesting]=useState(false);/* Manejo de imagen */const[pictureFiles,setPictureFiles]=useState([]);const[tempPictures,setTempPictures]=useState([]);const onDrop=useCallback(Files=>{Files.forEach((file,index)=>{if(files_validation(file,pictureFiles)){const fileURL=URL.createObjectURL(file);setTempPictures(prevLista=>prevLista.concat(fileURL));setPictureFiles(prevLista=>prevLista.concat(file));}else{console.log(\"validacion pasada, resultado erroneo\");}});},[]);const{getRootProps,getInputProps}=useDropzone({onDrop});useEffect(()=>{if(input_postDataBasis.id&&!requesting&&!LocalData){console.warn(\"[PublicationCommentsHandler]:: Solicitando comentarios\");setRequesting(true);request_publicationComments(auth,input_postDataBasis.url,input_postDataBasis.id,(error,result)=>{if(error){console.warn(error);}else{setLocalData(result);setRequesting(false);}});}else{console.warn(\"[PublicationCommentsHandler]:: cargando entrada...\");}},[input_postDataBasis]);useEffect(()=>{if(LocalData){if(localElements.find(element=>element.key==='null-banner')){setLocalElements([]);}LocalData.forEach((data,index)=>{const localExisting_elementIndex=localElements.findIndex(element=>element.key===\"comment-\".concat(data.id));if(localExisting_elementIndex!==-1){setLocalElements(prevLista=>{const updatedElements=[...prevLista];updatedElements[localExisting_elementIndex]=/*#__PURE__*/_jsx(CommentElement,{input_commentData:data},\"comment-\".concat(data.id));return updatedElements;});}else{setLocalElements(prevLista=>prevLista.concat(/*#__PURE__*/_jsx(CommentElement,{input_commentData:data},\"comment-\".concat(data.id))));}});}else{setLocalElements([/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-bad-list'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"Se el primero en comentar!\"})]},\"null-banner\")]);}},[LocalData]);const CommentElement=_ref4=>{let{input_commentData}=_ref4;return/*#__PURE__*/_jsxs(\"div\",{\"data-id\":input_commentData.id,className:\"message__wrapper forum-style\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar msg-style\",children:input_commentData.author_pic?/*#__PURE__*/_jsx(\"img\",{src:commonHost+input_commentData.author_pic,alt:\"user_pic\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"msg-metadata__wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{children:input_commentData.author}),/*#__PURE__*/_jsx(\"p\",{children:formatedDate(input_commentData.createdDate)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"msg-content__wrapper\",children:[input_commentData.content?/*#__PURE__*/_jsx(\"section\",{children:input_commentData.content}):'',input_commentData.media?/*#__PURE__*/_jsx(\"section\",{children:input_commentData.media}):'']})]});};function handleKeyDown(event){if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();saveComment();}else if(event.key==='Backspace'&&inputCommentRef.current.innerText.length===1){inputCommentRef.current.innerText=null;}}function saveComment(){if(inputCommentRef.current.innerText&&inputCommentRef.current.innerText!==\"\\n\"||pictureFiles.length>0){let local_media;if(pictureFiles.length>0){local_media=pictureFiles;}else{local_media=null;}let local_content;if(inputCommentRef.current.innerText===\"\\n\"){local_content=null;}else{local_content=inputCommentRef.current.innerText;}create_newComment(auth,local_content,local_media,input_postDataBasis.url,input_postDataBasis.id,(error,result)=>{if(error){console.log(error);}else{console.log(result);if(!LocalData){setLocalData([]);}setLocalData(prevLista=>prevLista.concat(result.newComment));postsInfo_setter(prevDatos=>{const nuevosDatos={...prevDatos,n_comments:input_postDataBasis.n_comments+1};return nuevosDatos;});inputCommentRef.current.innerText=null;setPictureFiles([]);setTempPictures([]);}});}else{console.error(\"contenidos vacios\");}}return/*#__PURE__*/_jsxs(\"div\",{className:\"publication__comments\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"comments__wrapper\",children:localElements}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-entry__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button iconed\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-clip'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"entry__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{ref:inputCommentRef,className:\"entry__content\",role:\"textbox\",onKeyDown:e=>handleKeyDown(e),contentEditable:\"true\"}),/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-kiss'})})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:saveComment,children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-send'})})})]})]});};/*----- Componentes locales -----*/const SidePublicationViewer=_ref5=>{let{publicationInfo,setPublicationInfo,setter_visibility,profileURL}=_ref5;const{commonHost,auth}=useContext(AppContext);useEffect(()=>{console.warn(\"[SidePublicationViewer]::\",publicationInfo!==null);if(publicationInfo){setter_visibility(true);}},[publicationInfo]);function close_handler(){setter_visibility(false);setTimeout(()=>{setPublicationInfo(null);},1000);}if(publicationInfo){return/*#__PURE__*/_jsx(\"div\",{className:\"publication-viewer__wrapper \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"publication__content\",children:[/*#__PURE__*/_jsx(PublicationCommentsHandler,{input_postDataBasis:{url:profileURL,id:publicationInfo.id,n_comments:publicationInfo.n_comments},postsInfo_setter:setPublicationInfo}),/*#__PURE__*/_jsxs(\"div\",{className:\"publication__contents\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__author\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar publication-style\",children:publicationInfo.author_pic?/*#__PURE__*/_jsx(\"img\",{src:commonHost+publicationInfo.author_pic,alt:\"user_pic\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})})}),/*#__PURE__*/_jsx(\"p\",{className:\"author-label\",children:publicationInfo.author})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content__title\",children:/*#__PURE__*/_jsx(\"h2\",{children:publicationInfo.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"content__tags\",children:/*#__PURE__*/_jsx(TagsHandler,{input_tags:publicationInfo.tags,fullMode:true})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-horizontal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"content__text\",children:publicationInfo.content?publicationInfo.content.map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index)):''}),/*#__PURE__*/_jsx(\"div\",{className:\"content__media\",children:publicationInfo.media?publicationInfo.media.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:commonHost+image,alt:\"Publication media \".concat(index)})):''}),/*#__PURE__*/_jsx(\"div\",{className:\"content__footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"points-section\",children:/*#__PURE__*/_jsx(PointsHandler,{authen_info:auth,postsInfo_setter:setPublicationInfo,input_points:publicationInfo.points,input_id:publicationInfo.id,input_userURL:profileURL})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"publication__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"publication_title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:publicationInfo.title}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-vertical\"}),/*#__PURE__*/_jsx(\"p\",{children:publicationInfo.createdDate})]}),/*#__PURE__*/_jsx(\"div\",{className:\"publication_options\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:close_handler,children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-cross'})})})})]})]})});}};const PublicationsSection=_ref6=>{let{currentUserURL,setter_currentPost,getter_currentPost}=_ref6;const[galleryElements,setGalleryElements]=useState([]);const[listElements,setListElements]=useState([]);const[galleryMode,setGalleryMode]=useState(true);const{commonHost,auth,userData,localCounter}=useContext(AppContext);const[localLoading,setLocalLoading]=useState(true);const[modeCreator,setModeCreator]=useState(false);const[blockedCreator,setBlockedCreator]=useState(false);const[postsInfo,setPostsInfo]=useState(null);const inputTagRef=useRef(null);const inputTitleRef=useRef(null);const inputContentRef=useRef(null);const[currentTags,setCurrentTags]=useState([]);const[currentFilter,setCurrentFilter]=useState('');/* Manejo de imagen */const[pictureFiles,setPictureFiles]=useState([]);const[tempPictures,setTempPictures]=useState([]);const onDrop=useCallback(Files=>{Files.forEach((file,index)=>{if(files_validation(file,pictureFiles)){const fileURL=URL.createObjectURL(file);setTempPictures(prevLista=>prevLista.concat(fileURL));setPictureFiles(prevLista=>prevLista.concat(file));}else{console.log(\"validacion pasada, resultado erroneo\");}});},[]);const{getRootProps,getInputProps}=useDropzone({onDrop});useEffect(()=>{if(!localLoading){setLocalLoading(true);}if(auth){request_userPosts(auth,currentUserURL,(error,result)=>{if(error){if(error.data.error===\"NULL_POSTS\"){setGalleryElements([/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-bad-list'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones en este perfil\"})]},\"null-banner\")]);setListElements([/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-bad-list'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones en este perfil\"})]},\"null-banner\")]);setLocalLoading(false);}else{console.error(error);}}else{setPostsInfo(result.reverse());}});}else{console.warn(\"[PublicationsSection]:: Aun no carga el auth...\");}},[auth,currentUserURL]);useEffect(()=>{if(postsInfo&&getter_currentPost){const index=postsInfo.findIndex(objeto=>objeto.id===getter_currentPost.id);if(postsInfo[index]!==getter_currentPost){if(index!==-1){const nuevosDatos=postsInfo;nuevosDatos[index]=getter_currentPost;setPostsInfo(nuevosDatos);cards_creator(nuevosDatos);}else{console.error(\"[PublicationsSection]:: postInfo no tiene un objeto que concuerde con currentPost\");}}else{console.warn(\"[PublicationsSection]:: postsInfo == currentPost\");}}else{console.warn(\"[PublicationsSection - LocalUpdater]:: aun no hay informacion de posts\");}},[getter_currentPost,postsInfo]);useEffect(()=>{cards_creator(postsInfo);},[postsInfo]);useEffect(()=>{if(userData.user_url){if(userData.user_url===currentUserURL){setBlockedCreator(false);}else{setBlockedCreator(true);}}},[currentUserURL,userData]);function cards_creator(entry_info_list){if(entry_info_list){console.warn(\"informacion actual de post:\",entry_info_list);if(galleryElements.find(element=>element.key==='null-banner')){setGalleryElements([]);}if(listElements.find(element=>element.key==='null-banner')){setListElements([]);}entry_info_list.forEach((data,index)=>{const galleryIndex=galleryElements.findIndex(element=>element.key===\"card-gallery-\".concat(data.id));const listIndex=listElements.findIndex(element=>element.key===\"card-list-\".concat(data.id));if(galleryIndex!==-1){setGalleryElements(prevLista=>{const updatedGalleryElements=[...prevLista];updatedGalleryElements[galleryIndex]=/*#__PURE__*/_jsx(GalleryView,{input_post:data,input_host:commonHost},\"card-gallery-\".concat(data.id));return updatedGalleryElements;});}else{setGalleryElements(prevLista=>prevLista.concat(/*#__PURE__*/_jsx(GalleryView,{input_post:data,input_host:commonHost},\"card-gallery-\".concat(data.id))));}if(listIndex!==-1){setListElements(prevLista=>{const updatedListElements=[...prevLista];updatedListElements[listIndex]=/*#__PURE__*/_jsx(ListView,{input_post:data,input_host:commonHost},\"card-list-\".concat(data.id));return updatedListElements;});}else{setListElements(prevLista=>prevLista.concat(/*#__PURE__*/_jsx(ListView,{input_post:data,input_host:commonHost},\"card-list-\".concat(data.id))));}});setLocalLoading(false);}else{console.error(\"no hay postInfo para generar las tarjetas\");}}const ListView=_ref7=>{let{input_post,input_host}=_ref7;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setter_currentPost(input_post.id),\"data-id\":input_post.id,className:\"card__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_tags\",children:/*#__PURE__*/_jsx(TagsHandler,{input_tags:input_post.tags})}),/*#__PURE__*/_jsx(\"h3\",{className:\"post_title\",children:input_post.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card__postBody\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post_content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_author\",children:/*#__PURE__*/_jsxs(\"p\",{children:[input_post.author,\":\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"post_content-text\",children:/*#__PURE__*/_jsx(\"p\",{children:input_post.content})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_points\",children:/*#__PURE__*/_jsx(PointsHandler,{postsInfo_setter:setPostsInfo,authen_info:auth,input_points:input_post.points,input_id:input_post.id,input_userURL:currentUserURL})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post_comments-number\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-comment'})}),/*#__PURE__*/_jsx(\"p\",{children:input_post.n_comments})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_date\",children:/*#__PURE__*/_jsx(\"p\",{children:formatedDate(input_post.createdDate)})})]})]}),input_post.media?/*#__PURE__*/_jsx(\"div\",{className:\"card__media\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+input_post.media[0],alt:\"Publication main media\"})}):'']});};const GalleryView=_ref8=>{let{input_post,input_host}=_ref8;const[LocalData,setLocalData]=useState(null);useEffect(()=>{if(input_post){setLocalData(input_post);}else{console.error(\"[GalleryCard]:: input_post no tiene nada\");}},[input_post]);const PicturesHandler=_ref9=>{let{input_images}=_ref9;let local_elements=[];input_images.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){if(local_elements.length<4){if(input_images.length===1){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection full-column full-row\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(1)})},index));}else if(input_images.length===2){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection full-column\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}else if(input_images.length===3){if(index===0){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection full-column\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}else{local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}}else{local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}}}});return local_elements;};if(LocalData){return/*#__PURE__*/_jsxs(\"div\",{\"data-id\":LocalData.id,className:\"card__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setter_currentPost(LocalData),className:\"card__header\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_author\",children:/*#__PURE__*/_jsx(\"p\",{children:LocalData.author})}),/*#__PURE__*/_jsx(\"p\",{className:\"post_date\",children:formatedDate(LocalData.createdDate)})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"post_title\",children:LocalData.title})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setter_currentPost(LocalData),className:\"card__postBody\",children:[LocalData.media?/*#__PURE__*/_jsx(\"div\",{className:\"body-media\",children:/*#__PURE__*/_jsx(PicturesHandler,{input_images:LocalData.media})}):/*#__PURE__*/_jsx(\"div\",{className:\"post_content-text\",children:LocalData.content.map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"post_tags\",children:/*#__PURE__*/_jsx(TagsHandler,{input_tags:LocalData.tags})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_comments-number\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-comment'})}),/*#__PURE__*/_jsx(\"p\",{children:LocalData.n_comments})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_points\",children:/*#__PURE__*/_jsx(PointsHandler,{postsInfo_setter:setPostsInfo,authen_info:auth,input_points:LocalData.points,input_id:LocalData.id,input_userURL:currentUserURL})})]})]});}};const TempMediaViewer=_ref10=>{let{input_media}=_ref10;let local_elements=[];function delete_temp_file(index_file){const newLocal_elements=local_elements.filter((value,index,arr)=>{return index!==index_file;});local_elements=newLocal_elements;const newPicturesFiles=pictureFiles.filter((value,index,arr)=>{return index!==index_file;});setPictureFiles(newPicturesFiles);const newTempPictures=tempPictures.filter((value,index,arr)=>{return index!==index_file;});setTempPictures(newTempPictures);}input_media.forEach((data,index)=>{local_elements.push(/*#__PURE__*/_jsxs(\"div\",{\"data-id\":\"button-for-media-\".concat(index),className:\"imagePreview\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:()=>delete_temp_file(index),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-discard'})})}),/*#__PURE__*/_jsx(\"img\",{src:data,alt:\"Temporal media \".concat(index)})]},index));});return local_elements;};const PostHandler=()=>{if(localLoading){return/*#__PURE__*/_jsx(\"h2\",{children:\"Cargando...\"});}else{if(galleryMode){if(currentFilter){const result=galleryElements.filter(tarjeta=>tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()));if(result.length>0){return result;}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-binocular'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones que coincidan\"})]});}}else{return galleryElements;}}else{if(currentFilter){const result=listElements.filter(tarjeta=>tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()));if(result.length>0){return result;}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-binocular'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones que coincidan\"})]});}}else{return listElements;}}}};function handleKeyDown(event){let mode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"msg\";if(mode===\"msg\"){if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();//const message = event.target.innerText;\n//console.log(message)\nsave_newPost();}else if(event.key==='Backspace'&&event.target.innerText.length===1){event.target.innerText=null;}}else if(mode===\"tag\"){if(event.key===' '||event.key==='Enter'){event.preventDefault();const raw_tags=event.target.value.split(' ');raw_tags.forEach(tag=>{if(!currentTags.includes(tag)&&currentTags.length<9){setCurrentTags(prevLista=>prevLista.concat(tag));}else if(!currentTags.length<9){console.warn(\"maximo 9 etiquetas!\");}});event.target.value='';}else if(event.key==='Backspace'&&!event.shiftKey){setCurrentTags(prevLista=>prevLista.slice(0,-1));}}};function save_newPost(){if(inputTitleRef.current.value){if(currentTags.length>0){if(inputContentRef.current.innerText&&inputContentRef.current.innerText!==\"\\n\"||pictureFiles.length>0){let local_media;if(pictureFiles.length>0){local_media=pictureFiles;}else{local_media=null;}let local_content;if(inputContentRef.current.innerText===\"\\n\"){local_content=null;}else{local_content=inputContentRef.current.innerText;}let local_tags=currentTags.join(\",\");create_newPost(auth,{title:inputTitleRef.current.value,content:local_content,tags:local_tags},local_media,userData.user_url,(error,result)=>{if(error){console.log(error);}else{inputContentRef.current.innerText=null;inputTitleRef.current.value=null;setCurrentTags([]);setPictureFiles([]);setTempPictures([]);setModeCreator(false);}});}else{console.error(\"contenidos vacios\");}}else{console.error(\"etiquetas vacias\");}}else{console.error(\"titulo vacio\");}}return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"publications__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-interaction \".concat(modeCreator&&currentUserURL===userData.user_url?'create':'search'),children:[/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:()=>setModeCreator(false),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(svg_icons)+\"\".concat(modeCreator?'#icon-cross':'#icon-search')})})}),modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"input\",{ref:inputTitleRef,className:\"title_mod\",type:\"text\",maxLength:100,placeholder:\"titulo a crear\"}):/*#__PURE__*/_jsx(\"input\",{onChange:e=>setCurrentFilter(e.target.value),className:\"title_mod\",type:\"text\",maxLength:100,placeholder:\"titulo a buscar\"}),modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"div\",{className:\"post-content__wrapper\",children:/*#__PURE__*/_jsx(\"div\",{ref:inputContentRef,className:\"post-content__content\",role:\"textbox\",onKeyDown:e=>handleKeyDown(e),contentEditable:\"true\"})}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsxs(\"div\",{className:\"add-media__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:\"dropzone\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-add-photo'})}),/*#__PURE__*/_jsx(\"input\",{...getInputProps()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"add-media__contens\",children:/*#__PURE__*/_jsx(TempMediaViewer,{input_media:tempPictures})})]}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"div\",{className:\"add-emogy__wrapper\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-kiss'})})}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-horizontal\"}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsxs(\"div\",{onClick:()=>inputTagRef.current.focus(),className:\"add-tags__wrapper\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-tag'})}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator bullet\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-tags\",children:[/*#__PURE__*/_jsx(TagsHandler,{input_tags:currentTags,fullMode:true}),/*#__PURE__*/_jsx(\"input\",{ref:inputTagRef,type:\"text\",onKeyDown:e=>handleKeyDown(e,\"tag\")})]})]}):'',/*#__PURE__*/_jsxs(\"button\",{disabled:blockedCreator,className:\"button interaction-option\",onClick:modeCreator?()=>save_newPost():()=>setModeCreator(true),children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-edit'})}),/*#__PURE__*/_jsx(\"p\",{children:\"Nueva publicacion\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"posts-filter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"button-dropdown\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-dropdown__toggler\",children:galleryMode?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-gallery-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de galeria\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"icon arrow\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-arrow'})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-list-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de Lista\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"icon arrow\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-arrow'})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-dropdown__content\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"option\",onClick:()=>setGalleryMode(true),children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-gallery-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de galeria\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"option\",onClick:()=>setGalleryMode(false),children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-list-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de Lista\"})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"publications \".concat(galleryMode?'gallery':'list'),children:/*#__PURE__*/_jsx(PostHandler,{})})]})});};const InformationSection=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:\"INFORMATION\"});};const GallerySection=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:\"GALLERY\"});};const CollectionsSection=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:\"COLLECTIONS\"});};/*----- Componente central -----*/export const ProfilePanel=()=>{const{username}=useParams();const{auth,userData,commonHost}=useContext(AppContext);const[tabberLoc,setTabberLoc]=useState('one');const current_url=useLocation();const[currentPost,setCurrentPost]=useState(null);const[visiblePostViewer,setVisiblePostViewer]=useState(false);const[profileData,setProfileData]=useState({});const[base_url,setBase_url]=useState('');const[blockedInteraction,setBlockedInteraction]=useState(false);const[modeProfilePicUpdate,setModeProfilePicUpdate]=useState(false);useEffect(()=>{if(auth){if(profileData.user_url){if(username===profileData.user_url){console.error(\"\".concat(username,\" === \").concat(profileData.user_url,\" --> \").concat(username===profileData.user_url));}else{if(username===userData.user_url){setProfileData(userData);}else{request_ProfileData(auth,username,(error,result)=>{if(error){console.log(error);}else{setProfileData(result);}});}}}else{if(username===userData.user_url){setProfileData(userData);}else{request_ProfileData(auth,username,(error,result)=>{if(error){console.log(error);}else{setProfileData(result);}});}}}if(username){setBase_url(\"/app/profile/\".concat(username));}},[auth,username]);useEffect(()=>{if(userData){if(userData.user_url===username){setBlockedInteraction(true);}else{setBlockedInteraction(false);}}else{console.warn(\"[Profile Panel]:: aun no carga el userData\");}},[username,userData]);useEffect(()=>{if(base_url){if(current_url.pathname===base_url||current_url.pathname===\"\".concat(base_url,\"/\")){setTabberLoc('one');}else if(current_url.pathname===\"\".concat(base_url,\"/info\")){setTabberLoc('two');}else if(current_url.pathname===\"\".concat(base_url,\"/gallery\")){setTabberLoc('three');}else if(current_url.pathname===\"\".concat(base_url,\"/collections\")){setTabberLoc('four');}}},[base_url,current_url.pathname]);function side_publication_closer(){setVisiblePostViewer(false);setTimeout(()=>{setCurrentPost(null);},1000);}return/*#__PURE__*/_jsxs(\"div\",{className:\"screen__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel__wrapper profile-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-bg-img__wrapper\",children:profileData.bg_url?/*#__PURE__*/_jsx(\"img\",{src:profileData.bg_url,alt:\"custom-background\"}):/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/assets/imgs/loading_background.jpg',alt:\"default-background\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-distintion__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-avatar profile-style\",children:[profileData.profilePic_url?/*#__PURE__*/_jsx(\"img\",{src:commonHost+profileData.profilePic_url,alt:\"user_pic\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})}),userData.user_url===username?/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-camera-add'})})}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-names\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(profileData.name,\" \").concat(profileData.lastName)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"HeartPoints: \",profileData.heart_points]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button interaction-option\",disabled:blockedInteraction,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-heart-add'})}),/*#__PURE__*/_jsx(\"p\",{children:\"A\\xF1adir\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button interaction-option secundary\",disabled:blockedInteraction,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-chat'})}),/*#__PURE__*/_jsx(\"p\",{children:\"Mensaje\"})]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-horizontal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-navigation__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-navigation__content \".concat(tabberLoc),children:[/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/\"),className:\"button tabber \".concat(tabberLoc==='one'?'current':''),children:\"Historias\"}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/info\"),className:\"button tabber \".concat(tabberLoc==='two'?'current':''),children:\"Informacion\"}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/gallery\"),className:\"button tabber \".concat(tabberLoc==='three'?'current':''),children:\"Fotos\"}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/collections\"),className:\"button tabber \".concat(tabberLoc==='four'?'current':''),children:\"Colecciones\"})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PublicationsSection,{currentUserURL:username,setter_currentPost:setCurrentPost,getter_currentPost:currentPost})}),/*#__PURE__*/_jsx(Route,{path:\"/info\",element:/*#__PURE__*/_jsx(InformationSection,{})}),/*#__PURE__*/_jsx(Route,{path:\"/gallery\",element:/*#__PURE__*/_jsx(GallerySection,{})}),/*#__PURE__*/_jsx(Route,{path:\"/collections\",element:/*#__PURE__*/_jsx(CollectionsSection,{})})]})]})}),tabberLoc==='one'?/*#__PURE__*/_jsxs(\"div\",{className:\"sub-screen__wrapper half-screen \".concat(visiblePostViewer?'':'hidden'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"exit-half-screen\",onClick:()=>side_publication_closer()}),/*#__PURE__*/_jsx(SidePublicationViewer,{publicationInfo:currentPost,setPublicationInfo:setCurrentPost,setter_visibility:setVisiblePostViewer,profileURL:username})]}):'',modeProfilePicUpdate?/*#__PURE__*/_jsx(\"div\",{className:\"sub-screen__wrapper full-screen\",children:/*#__PURE__*/_jsx(\"div\",{children:\"coso\"})}):'']});};","map":{"version":3,"names":["React","useContext","useEffect","useState","useRef","useCallback","useParams","AppContext","Routes","Route","Link","useLocation","useDropzone","request_userPosts","request_ProfileData","create_newPost","request_publicationComments","request_set_vote","create_newComment","svg_icons","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","formatedDate","dateString","raw_date","Date","months","formated_date","concat","getDate","toString","padStart","getMonth","getFullYear","getHours","getMinutes","files_validation","element","picturesList","acceptedFileTypes","maxSize","length","console","log","includes","type","size","TagsHandler","_ref","input_tags","fullMode","local_elements","forEach","data","index","localExisting_element","find","key","push","className","children","PointsHandler","_ref2","postsInfo_setter","input_points","input_id","input_userURL","authen_info","handle_votes","vote_type","error","result","prevDatos","Array","isArray","nuevosDatos","findIndex","objeto","id","nuevoObjeto","points","total","current_user","onClick","xlinkHref","PublicationCommentsHandler","_ref3","input_postDataBasis","auth","commonHost","inputCommentRef","LocalData","setLocalData","localElements","setLocalElements","requesting","setRequesting","pictureFiles","setPictureFiles","tempPictures","setTempPictures","onDrop","Files","file","fileURL","URL","createObjectURL","prevLista","getRootProps","getInputProps","warn","url","localExisting_elementIndex","updatedElements","CommentElement","input_commentData","_ref4","author_pic","src","alt","author","createdDate","content","media","handleKeyDown","event","shiftKey","preventDefault","saveComment","current","innerText","local_media","local_content","newComment","n_comments","ref","role","onKeyDown","e","contentEditable","SidePublicationViewer","_ref5","publicationInfo","setPublicationInfo","setter_visibility","profileURL","close_handler","setTimeout","title","tags","map","paragraph","image","PublicationsSection","_ref6","currentUserURL","setter_currentPost","getter_currentPost","galleryElements","setGalleryElements","listElements","setListElements","galleryMode","setGalleryMode","userData","localCounter","localLoading","setLocalLoading","modeCreator","setModeCreator","blockedCreator","setBlockedCreator","postsInfo","setPostsInfo","inputTagRef","inputTitleRef","inputContentRef","currentTags","setCurrentTags","currentFilter","setCurrentFilter","reverse","cards_creator","user_url","entry_info_list","galleryIndex","listIndex","updatedGalleryElements","GalleryView","input_post","input_host","updatedListElements","ListView","_ref7","_ref8","PicturesHandler","_ref9","input_images","TempMediaViewer","_ref10","input_media","delete_temp_file","index_file","newLocal_elements","filter","value","arr","newPicturesFiles","newTempPictures","PostHandler","tarjeta","props","toLowerCase","mode","arguments","undefined","save_newPost","target","raw_tags","split","tag","slice","local_tags","join","maxLength","placeholder","onChange","focus","disabled","InformationSection","GallerySection","CollectionsSection","ProfilePanel","username","tabberLoc","setTabberLoc","current_url","currentPost","setCurrentPost","visiblePostViewer","setVisiblePostViewer","profileData","setProfileData","base_url","setBase_url","blockedInteraction","setBlockedInteraction","modeProfilePicUpdate","setModeProfilePicUpdate","pathname","side_publication_closer","bg_url","process","env","PUBLIC_URL","profilePic_url","name","lastName","heart_points","to","path"],"sources":["/ufs/walther22wolff/Workspace - Programming/0. Web Applications - Repok/1. NodeJS_React - Repok/heartmate_page/src/components/app_screen_panels/profile_panel.jsx"],"sourcesContent":["/*----- Importaciones y dependencias -----*/\nimport React, { useContext, useEffect, useState, useRef, useCallback } from 'react';\nimport { useParams } from 'react-router-dom'\nimport { AppContext } from '../../scripts/app_context';\nimport { Routes, Route, Link, useLocation } from 'react-router-dom';\nimport { useDropzone } from 'react-dropzone';\n\nimport { request_userPosts, request_ProfileData, create_newPost, request_publicationComments, request_set_vote, create_newComment } from '../../scripts/server_com';\n\n/*----- Recursos multimedia -----*/\nimport svg_icons from '../../icons/svg-resources.xml';\n\n/*----- Funciones Generales -----*/\nfunction formatedDate(dateString){\n    const raw_date = new Date(dateString);\n    const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\n\n    const formated_date = `${raw_date.getDate().toString().padStart(2, '0')} de ${months[raw_date.getMonth()]} del ${raw_date.getFullYear()} • ${raw_date.getHours()}:${raw_date.getMinutes().toString().padStart(2, '0')}`;\n\n    return formated_date\n}\n\nfunction files_validation (element, picturesList) {\n    const acceptedFileTypes = ['image/png', 'image/jpeg', 'image/webp'];\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    if (picturesList.length > 9) {\n        console.log('maximo 9 archivos'); return false;\n    } else {\n        if (!element) {return false;} \n        else if (!acceptedFileTypes.includes(element.type)) {console.log('Archivo no válido (tipo MIME)'); return false;} \n        else if (element.size > maxSize) {console.log('Archivo excede tamaño máximo'); return false;}\n        else {return true;}\n    }\n}\n\n/*----- Componentes Auxiliares -----*/\nconst TagsHandler = ({input_tags, fullMode=false}) => {\n    let local_elements = [];\n    if (!fullMode) {\n        input_tags.forEach((data, index) => {\n            const localExisting_element = local_elements.find(element => element.key === index);\n            if (!localExisting_element) {\n                if (local_elements.length < 3 ) {\n                    local_elements.push(\n                        <div key={index} className='tagLabel'><p>#{data}</p></div>\n                    )\n                } else if (local_elements.length < 4 && input_tags.length >= 4) {\n                    local_elements.push(\n                        <div key={4} className='tagLabel'><p>{`+${input_tags.length - 3}`}</p></div>\n                    )\n                }\n            }\n        });\n    } else {\n        input_tags.forEach((data, index) => {\n            const localExisting_element = local_elements.find(element => element.key === index);\n            if (!localExisting_element) {\n                local_elements.push(\n                    <div key={index} className='tagLabel'><p>#{data}</p></div>\n                )\n            }\n        });\n    }\n\n    return local_elements;\n}\n\nconst PointsHandler = ({postsInfo_setter, input_points, input_id, input_userURL, authen_info }) => {\n    function handle_votes (vote_type) {\n        request_set_vote(authen_info, vote_type, input_userURL, input_id, (error, result) => {\n            if (error) {\n                console.log(error)\n            } else {\n                postsInfo_setter(prevDatos => {\n                    if (Array.isArray(prevDatos)) {\n                        const nuevosDatos = [...prevDatos];\n                        const index = nuevosDatos.findIndex(objeto => objeto.id === input_id);\n                        \n                        if (index !== -1) {\n                            const objeto = nuevosDatos[index];\n                            const nuevoObjeto = {\n                                ...objeto,\n                                points: {\n                                    total: result.total, // Puedes cambiar esto por result.total si es necesario\n                                    current_user: result.current_user\n                                }\n                            };\n\n                            nuevosDatos[index] = nuevoObjeto; // Reemplazar el objeto en la lista\n                        }\n\n                        return nuevosDatos;\n                    } else if (typeof prevDatos === 'object' && !Array.isArray(prevDatos)) {\n                        const nuevosDatos = {\n                            ...prevDatos,\n                            points: {\n                                total: result.total,\n                                current_user: result.current_user\n                            }\n                        }\n                \n                        return nuevosDatos;\n                    } else {\n                        return prevDatos;\n                    }\n                });\n            }\n        });\n    }\n\n    return (\n        <>\n            <button onClick={() => handle_votes(\"true\")} className={`button iconed ${input_points.current_user === \"true\" ? 'voted' : ''}`}>\n                <svg className='icon'>\n                    <use xlinkHref={svg_icons+'#icon-pointer'}></use>\n                </svg>\n            </button>\n            <p>{input_points.total}</p>\n            <button onClick={() => handle_votes(\"false\")} className={`button iconed down ${input_points.current_user === \"false\" ? 'voted' : ''}`}>\n                <svg className='icon'>\n                    <use xlinkHref={svg_icons+'#icon-pointer'}></use>\n                </svg>\n            </button>\n        </>\n    )\n}\n\nconst PublicationCommentsHandler = ({ input_postDataBasis, postsInfo_setter }) => {\n    const { auth, commonHost } = useContext(AppContext);\n    const inputCommentRef = useRef(null);\n\n    const [ LocalData, setLocalData ] = useState(null);\n\n    const [ localElements, setLocalElements ] = useState([]);\n    const [ requesting, setRequesting ] = useState(false);\n\n    /* Manejo de imagen */\n    const [ pictureFiles, setPictureFiles ] = useState([]);\n    const [ tempPictures, setTempPictures ] = useState([]);\n\n    const onDrop = useCallback(Files => {\n        Files.forEach((file, index) => {\n            if (files_validation(file, pictureFiles)) {\n                const fileURL = URL.createObjectURL(file);\n                setTempPictures(prevLista => prevLista.concat(fileURL));\n                setPictureFiles(prevLista => prevLista.concat(file));\n            } else {\n                console.log(\"validacion pasada, resultado erroneo\")\n            }  \n        });\n    }, []);\n\n    const { getRootProps, getInputProps } = useDropzone({onDrop});\n\n    useEffect(() => {\n        if (input_postDataBasis.id && !requesting && !LocalData) {\n            console.warn(`[PublicationCommentsHandler]:: Solicitando comentarios`);\n            setRequesting(true);\n            request_publicationComments(auth, input_postDataBasis.url, input_postDataBasis.id, (error, result) => {\n                if (error) {\n                    console.warn(error);\n                } else {\n                    setLocalData(result);\n                    setRequesting(false);\n                }\n            });\n        } else {\n            console.warn(`[PublicationCommentsHandler]:: cargando entrada...`);\n        }\n    }, [input_postDataBasis]);\n\n    useEffect(() => {\n        if (LocalData) {\n            if (localElements.find(element => element.key === 'null-banner')) {setLocalElements([])}\n\n            LocalData.forEach((data, index) => {\n                const localExisting_elementIndex = localElements.findIndex(element => element.key === `comment-${data.id}`);\n\n                if (localExisting_elementIndex !== -1) {\n                    setLocalElements(prevLista => {\n                        const updatedElements = [...prevLista];\n                        updatedElements[localExisting_elementIndex] = <CommentElement key={`comment-${data.id}`} input_commentData={data}/>;\n                        return updatedElements;\n                    });\n                } else {\n                    setLocalElements(prevLista => prevLista.concat(<CommentElement key={`comment-${data.id}`} input_commentData={data}/>));\n                }\n            });\n        } else {\n            setLocalElements([\n                <div key={`null-banner`} className='empty-msg'>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-bad-list'}></use>\n                    </svg>\n                    <h2>Se el primero en comentar!</h2>\n                </div>\n            ]);\n        }\n    }, [LocalData])\n\n    const CommentElement = ({ input_commentData }) => {\n        return (\n            <div data-id={input_commentData.id} className='message__wrapper forum-style'>\n                <div className='user-avatar msg-style'>\n                    {input_commentData.author_pic ?\n                    <img src={commonHost+input_commentData.author_pic} alt=\"user_pic\" /> :\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                    </svg>}\n                </div>\n                <div className='msg-metadata__wrapper'>\n                    <h3>{input_commentData.author}</h3>\n                    <p>{formatedDate(input_commentData.createdDate)}</p>\n                </div>\n                <div className='msg-content__wrapper'>\n                    {input_commentData.content ? <section>{input_commentData.content}</section> : ''}\n                    {input_commentData.media ? <section>{input_commentData.media}</section> : ''}\n                </div>\n            </div>\n        );\n    }\n\n    function handleKeyDown (event) {\n        if (event.key === 'Enter' && !event.shiftKey) {\n            event.preventDefault();\n            saveComment();\n        } else if (event.key === 'Backspace' && inputCommentRef.current.innerText.length === 1) {\n            inputCommentRef.current.innerText = null;\n        }\n    }\n\n    function saveComment() {\n        if ((inputCommentRef.current.innerText && inputCommentRef.current.innerText !== \"\\n\") || pictureFiles.length > 0) {\n            let local_media;\n            if (pictureFiles.length > 0) {local_media = pictureFiles} else {local_media = null}\n\n            let local_content;\n            if (inputCommentRef.current.innerText === \"\\n\") {local_content = null} else {local_content = inputCommentRef.current.innerText}\n\n            create_newComment(auth, local_content, local_media, input_postDataBasis.url, input_postDataBasis.id, (error, result) => {\n                if (error) {\n                    console.log(error)\n                } else {\n                    console.log(result)\n                    if (!LocalData) {setLocalData([])}\n                    setLocalData(prevLista => prevLista.concat(result.newComment))\n                    postsInfo_setter(prevDatos => {const nuevosDatos = {...prevDatos, n_comments: input_postDataBasis.n_comments + 1}; return nuevosDatos;});\n                    inputCommentRef.current.innerText = null;\n                    setPictureFiles([]);\n                    setTempPictures([]);\n                }\n            });\n        }\n        else {\n            console.error(\"contenidos vacios\")\n        }\n    }\n\n    return (\n        <div className='publication__comments'>\n            <div className='comments__wrapper'>\n                {localElements}\n            </div>\n            <div className='message-entry__wrapper'>\n                <div className='button iconed'>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-clip'}></use>\n                    </svg>\n                </div>\n                <div className='entry__wrapper'>\n                    <div ref={inputCommentRef}  className='entry__content' role=\"textbox\" onKeyDown={(e) => handleKeyDown(e)} contentEditable=\"true\"></div>\n                    <button className='button iconed'>\n                        <svg className='icon'>\n                            <use xlinkHref={svg_icons+'#icon-kiss'}></use>\n                        </svg>\n                    </button>\n                </div>\n                <button className='button iconed' onClick={saveComment}>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-send'}></use>\n                    </svg>\n                </button>\n            </div>\n        </div>\n    )\n}\n\n/*----- Componentes locales -----*/\nconst SidePublicationViewer = ({publicationInfo, setPublicationInfo, setter_visibility, profileURL}) => {\n    const { commonHost, auth } = useContext(AppContext);\n\n    useEffect(() => {\n        console.warn(\"[SidePublicationViewer]::\", publicationInfo !== null);\n        if (publicationInfo) {setter_visibility(true);}\n    }, [publicationInfo])\n\n    function close_handler () {\n        setter_visibility(false);\n        setTimeout(() => {\n            setPublicationInfo(null);\n        }, 1000);\n    }\n\n    if (publicationInfo) {\n        return (\n            <div className={`publication-viewer__wrapper `}>\n                <div className='publication__content'>\n                    <PublicationCommentsHandler input_postDataBasis={{url: profileURL, id: publicationInfo.id, n_comments: publicationInfo.n_comments}} postsInfo_setter={setPublicationInfo} />\n                    <div className='publication__contents'>\n                        <div className='content__header'>\n                            <div className='content__author'>\n                                <div className='user-avatar publication-style'>\n                                    {publicationInfo.author_pic ?\n                                        <img src={commonHost+publicationInfo.author_pic} alt=\"user_pic\" /> :\n                                        <svg className='icon'>\n                                            <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                                        </svg>\n                                    }\n                                </div>\n                                <p className='author-label'>{publicationInfo.author}</p>\n                            </div>\n                            <div className='content__title'>\n                                <h2>{publicationInfo.title}</h2>\n                            </div>\n                            <div className='content__tags'>\n                                <TagsHandler input_tags={publicationInfo.tags} fullMode={true}/>\n                            </div>\n                        </div>\n                        <hr className='separator full-horizontal'/>\n                        <div className='content__text'>\n                            {publicationInfo.content ?\n                            publicationInfo.content.map((paragraph, index) => (\n                                <p key={index}>{paragraph}</p>\n                            )): ''}\n                        </div>\n                        <div className='content__media'>\n                            {publicationInfo.media ? \n                            publicationInfo.media.map((image, index) => (\n                                <img src={commonHost+image} alt={`Publication media ${index}`}/>\n                            )) : ''}\n                        </div>\n                        <div className='content__footer'>\n                            <div className='points-section'>\n                                <PointsHandler authen_info={auth} postsInfo_setter={setPublicationInfo} input_points={publicationInfo.points} input_id={publicationInfo.id} input_userURL={profileURL}/>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='publication__header'>\n                        <div className='publication_title'>\n                            <h3>{publicationInfo.title}</h3>\n                            <hr className='separator full-vertical' />\n                            <p>{publicationInfo.createdDate}</p>\n                        </div>\n                        <div className='publication_options'>\n                            <button className='button iconed' onClick={close_handler}>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-cross'}></use>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst PublicationsSection = ({ currentUserURL, setter_currentPost, getter_currentPost }) => {\n    const [ galleryElements, setGalleryElements ] = useState([]);\n    const [ listElements, setListElements ] = useState([]);\n    const [ galleryMode, setGalleryMode ] = useState(true);\n    const { commonHost, auth, userData, localCounter } = useContext(AppContext);\n    const [ localLoading, setLocalLoading ] = useState(true);\n    const [ modeCreator, setModeCreator ] = useState(false);\n    const [ blockedCreator, setBlockedCreator ] = useState(false);\n    const [ postsInfo, setPostsInfo ] = useState(null);\n\n    const inputTagRef = useRef(null);\n    const inputTitleRef = useRef(null);\n    const inputContentRef = useRef(null);\n\n    const [ currentTags, setCurrentTags ] = useState([]);\n\n    const [ currentFilter, setCurrentFilter ] = useState('');\n\n    /* Manejo de imagen */\n    const [ pictureFiles, setPictureFiles ] = useState([]);\n    const [ tempPictures, setTempPictures ] = useState([]);\n\n    const onDrop = useCallback(Files => {\n        Files.forEach((file, index) => {\n            if (files_validation(file, pictureFiles)) {\n                const fileURL = URL.createObjectURL(file);\n                setTempPictures(prevLista => prevLista.concat(fileURL));\n                setPictureFiles(prevLista => prevLista.concat(file));\n            } else {\n                console.log(\"validacion pasada, resultado erroneo\")\n            }  \n        });\n    }, []);\n\n    const { getRootProps, getInputProps } = useDropzone({onDrop});\n\n    useEffect(() => {\n        if (!localLoading) {setLocalLoading(true)}\n        if (auth) {\n            request_userPosts(auth, currentUserURL, (error, result) => {\n                if (error) {\n                    if (error.data.error === \"NULL_POSTS\") {\n                        setGalleryElements([\n                            <div key={`null-banner`} className='empty-msg'>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-bad-list'}></use>\n                                </svg>\n                                <h2>No hay publicaciones en este perfil</h2>\n                            </div>\n                        ]);\n                        setListElements([\n                            <div key={`null-banner`} className='empty-msg'>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-bad-list'}></use>\n                                </svg>\n                                <h2>No hay publicaciones en este perfil</h2>\n                            </div>\n                        ]);\n                        setLocalLoading(false);\n                    } else {console.error(error);}\n                } else {\n                    setPostsInfo(result.reverse())\n                }\n            });\n        } else {\n            console.warn(\"[PublicationsSection]:: Aun no carga el auth...\")\n        }\n    }, [auth, currentUserURL]);\n\n    useEffect(() => {\n        if (postsInfo && getter_currentPost) {\n            const index = postsInfo.findIndex(objeto => objeto.id === getter_currentPost.id);\n            if (postsInfo[index] !== getter_currentPost) {\n                if (index !== -1) {\n                    const nuevosDatos = postsInfo;\n                    nuevosDatos[index] = getter_currentPost;\n                    setPostsInfo(nuevosDatos);\n                    cards_creator(nuevosDatos);\n                } else {\n                    console.error(`[PublicationsSection]:: postInfo no tiene un objeto que concuerde con currentPost`)\n                }\n            } else {\n                console.warn(`[PublicationsSection]:: postsInfo == currentPost`)\n            }\n        } else {\n            console.warn(`[PublicationsSection - LocalUpdater]:: aun no hay informacion de posts`);\n        }\n    }, [getter_currentPost, postsInfo]);\n\n    useEffect(() => {cards_creator(postsInfo)}, [postsInfo]);\n\n    useEffect(() => {\n        if (userData.user_url) {\n            if (userData.user_url === currentUserURL) {\n                setBlockedCreator(false);\n            } else {\n                setBlockedCreator(true)\n            }\n        }\n    }, [currentUserURL, userData])\n\n    function cards_creator (entry_info_list) {\n        if (entry_info_list) {\n            console.warn(\"informacion actual de post:\", entry_info_list);\n            if (galleryElements.find(element => element.key === 'null-banner')) {setGalleryElements([])}\n            if (listElements.find(element => element.key === 'null-banner')) {setListElements([])}\n\n            entry_info_list.forEach((data, index) => {\n                const galleryIndex = galleryElements.findIndex(element => element.key === `card-gallery-${data.id}`);\n                const listIndex = listElements.findIndex(element => element.key === `card-list-${data.id}`);\n    \n                if (galleryIndex !== -1) {\n                    setGalleryElements(prevLista => {\n                        const updatedGalleryElements = [...prevLista];\n                        updatedGalleryElements[galleryIndex] = <GalleryView key={`card-gallery-${data.id}`} input_post={data} input_host={commonHost}/>;\n                        return updatedGalleryElements;\n                    });\n                } else {\n                    setGalleryElements(prevLista => prevLista.concat(<GalleryView key={`card-gallery-${data.id}`} input_post={data} input_host={commonHost}/>));\n                }\n    \n                if (listIndex !== -1) {\n                    setListElements(prevLista => {\n                        const updatedListElements = [...prevLista];\n                        updatedListElements[listIndex] = <ListView key={`card-list-${data.id}`} input_post={data} input_host={commonHost}/>;\n                        return updatedListElements;\n                    });\n                } else {\n                    setListElements(prevLista => prevLista.concat(<ListView key={`card-list-${data.id}`} input_post={data} input_host={commonHost}/>));\n                }\n            });\n            setLocalLoading(false);\n        } else {\n            console.error(\"no hay postInfo para generar las tarjetas\");\n        }\n    }\n\n    const ListView = ({ input_post, input_host }) => {\n        return (\n            <div onClick={() => setter_currentPost(input_post.id)} data-id={input_post.id} className='card__wrapper'>\n                <div className='card__content'>\n                    <div className='card__header'>\n                        <div className='post_tags'>\n                            <TagsHandler input_tags={input_post.tags}/>\n                        </div>\n                        <h3 className='post_title'>{input_post.title}</h3>\n                    </div>\n                    <div className='card__postBody'>\n                        <div className='post_content'>\n                            <div className='post_author'>\n                                <p>{input_post.author}:</p>\n                            </div>\n                            <div className='post_content-text'>\n                                <p>{input_post.content}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='card__footer'>\n                        <div className='post_points'>\n                            <PointsHandler postsInfo_setter={setPostsInfo} authen_info={auth} input_points={input_post.points} input_id={input_post.id} input_userURL={currentUserURL}/>\n                        </div>\n                        <div className='post_comments-number'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-comment'}></use>\n                            </svg>\n                            <p>{input_post.n_comments}</p>\n                        </div>\n                        <div className='post_date'><p>{formatedDate(input_post.createdDate)}</p></div>\n                    </div>\n                </div>\n                {input_post.media ?\n                    <div className='card__media'>\n                        <img src={input_host+input_post.media[0]} alt=\"Publication main media\"/>\n                    </div> : ''\n                }\n            </div>\n        )\n    }\n\n    const GalleryView = ({ input_post, input_host }) => {\n        const [ LocalData, setLocalData ] = useState(null);\n\n        useEffect(() => {\n            if (input_post) {setLocalData(input_post)} else {console.error(\"[GalleryCard]:: input_post no tiene nada\")}\n        }, [input_post]);\n\n        const PicturesHandler = ({input_images}) => {\n            let local_elements = [];\n\n            input_images.forEach((data, index) => {\n                const localExisting_element = local_elements.find(element => element.key === index);\n                if (!localExisting_element) {\n                    if (local_elements.length < 4) {\n                        if (input_images.length === 1) {\n                            local_elements.push(\n                                <div key={index} className='imageSection full-column full-row'>\n                                    <img src={input_host+data} alt={`Publication media ${1}`}/>\n                                </div>\n                            )\n                        } else if (input_images.length === 2) {\n                            local_elements.push(\n                                <div key={index} className='imageSection full-column'>\n                                    <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                </div>\n                            )\n                        } else if (input_images.length === 3) {\n                            if (index === 0) {\n                                local_elements.push(\n                                    <div key={index} className='imageSection full-column'>\n                                        <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                    </div>\n                                )  \n                            } else {\n                                local_elements.push(\n                                    <div key={index} className='imageSection'>\n                                        <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                    </div>\n                                )    \n                            }\n                        } else {\n                            local_elements.push(\n                                <div key={index} className='imageSection'>\n                                    <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                </div>\n                            ) \n                        }\n                    }\n                }\n            });\n            return local_elements;\n        }\n\n        if (LocalData) {\n            return (\n                <div data-id={LocalData.id} className='card__wrapper'>\n                    <div onClick={() => setter_currentPost(LocalData)} className='card__header'>\n                        <section>\n                            <div className='post_author'><p>{LocalData.author}</p></div>\n                            <p className='post_date'>{formatedDate(LocalData.createdDate)}</p>\n                        </section>\n                        <h3 className='post_title'>{LocalData.title}</h3>\n                    </div>\n                    <div onClick={() => setter_currentPost(LocalData)} className='card__postBody'>\n                        {LocalData.media ?\n                            <div className='body-media'><PicturesHandler input_images={LocalData.media}/></div>:\n                            <div className='post_content-text'>\n                                {LocalData.content.map((paragraph, index) => (\n                                    <p key={index}>{paragraph}</p>\n                                ))}\n                            </div>\n                        }\n                        <div className='post_tags'>\n                            <TagsHandler input_tags={LocalData.tags}/>\n                        </div>\n                    </div>\n                    <div className='card__footer'>\n                        <div className='post_comments-number'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-comment'}></use>\n                            </svg>\n                            <p>{LocalData.n_comments}</p>\n                        </div>\n                        <div className='post_points'>\n                            <PointsHandler postsInfo_setter={setPostsInfo} authen_info={auth} input_points={LocalData.points} input_id={LocalData.id} input_userURL={currentUserURL}/>\n                        </div>\n                    </div>\n                </div>\n            );\n        }\n    }\n\n    const TempMediaViewer = ({input_media}) => {\n        let local_elements = [];\n\n        function delete_temp_file (index_file) {\n            const newLocal_elements = local_elements.filter((value, index, arr) => {return index !== index_file});\n            local_elements = newLocal_elements;\n\n            const newPicturesFiles = pictureFiles.filter((value, index, arr) => {return index !== index_file});\n            setPictureFiles(newPicturesFiles)\n\n            const newTempPictures = tempPictures.filter((value, index, arr) => {return index !== index_file});\n            setTempPictures(newTempPictures);\n        }\n\n        input_media.forEach((data, index) => {\n            local_elements.push(\n                <div data-id={`button-for-media-${index}`} key={index} className='imagePreview'>\n                    <button className='button iconed' onClick={() => delete_temp_file(index)}>\n                        <svg className='icon'>\n                            <use xlinkHref={svg_icons+'#icon-discard'}></use>\n                        </svg>\n                    </button>\n                    <img src={data} alt={`Temporal media ${index}`}/>\n                </div>\n            );\n        });\n        return local_elements;\n    }\n\n    const PostHandler = () => {\n        if (localLoading) {\n            return <h2>Cargando...</h2>\n        } else {\n            if (galleryMode) {\n                if (currentFilter) {\n                    const result = galleryElements.filter((tarjeta) => tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()))\n                    if (result.length > 0) {return result}\n                    else {return (\n                        <div className='empty-msg'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-binocular'}></use>\n                            </svg>\n                            <h2>No hay publicaciones que coincidan</h2>\n                        </div>\n                        )\n                    }\n                } else {return galleryElements}\n            } else {\n                if (currentFilter) {\n                    const result = listElements.filter((tarjeta) => tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()))\n                    if (result.length > 0) {return result}\n                    else {return (\n                        <div className='empty-msg'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-binocular'}></use>\n                            </svg>\n                            <h2>No hay publicaciones que coincidan</h2>\n                        </div>\n                        )\n                    }\n                } else {return listElements}\n            }\n        }\n    }\n\n    function handleKeyDown (event, mode=\"msg\") {\n        if (mode === \"msg\") {\n            if (event.key === 'Enter' && !event.shiftKey) {\n                event.preventDefault();\n                //const message = event.target.innerText;\n                //console.log(message)\n                save_newPost();\n            } else if (event.key === 'Backspace' && event.target.innerText.length === 1) {\n                event.target.innerText = null;\n            }\n        } else if (mode === \"tag\") {\n            if (event.key === ' ' || event.key === 'Enter') {\n                event.preventDefault();\n                const raw_tags = event.target.value.split(' ');\n                raw_tags.forEach(tag => {\n                    if (!currentTags.includes(tag) && currentTags.length < 9) {setCurrentTags(prevLista => prevLista.concat(tag));}\n                    else if (!currentTags.length < 9) {console.warn(\"maximo 9 etiquetas!\")}\n                });\n                event.target.value = '';\n            } else if (event.key === 'Backspace' && !event.shiftKey) {\n                setCurrentTags(prevLista => prevLista.slice(0, -1))\n            }\n        }\n    };\n\n    function save_newPost () {\n        if (inputTitleRef.current.value) {\n            if (currentTags.length > 0) {\n                if ((inputContentRef.current.innerText && inputContentRef.current.innerText !== \"\\n\") || pictureFiles.length > 0) {\n                    let local_media;\n                    if (pictureFiles.length > 0) {local_media = pictureFiles} else {local_media = null}\n\n                    let local_content;\n                    if (inputContentRef.current.innerText === \"\\n\") {local_content = null} else {local_content = inputContentRef.current.innerText}\n\n                    let local_tags = currentTags.join(\",\");\n\n                    create_newPost(auth, {\n                        title: inputTitleRef.current.value,\n                        content: local_content,\n                        tags: local_tags\n                    }, local_media, userData.user_url, (error, result) => {\n                        if (error) {\n                            console.log(error)\n                        } else {\n                            inputContentRef.current.innerText = null;\n                            inputTitleRef.current.value = null;\n                            setCurrentTags([]);\n                            setPictureFiles([]);\n                            setTempPictures([]);\n                            setModeCreator(false);\n                        }\n                    });\n                }\n                else {\n                    console.error(\"contenidos vacios\")\n                }\n            } else {\n                console.error(\"etiquetas vacias\")\n            }\n\n        } else {\n            console.error(\"titulo vacio\")\n        }\n    }\n\n    return (\n        <div className='publications__wrapper'>\n            <div className='publications__content'>\n                <div className='header'>\n                    <div className={`post-interaction ${modeCreator && currentUserURL === userData.user_url ? 'create' : 'search'}`}>\n                        <button className='button iconed' onClick={() => setModeCreator(false)}>\n                            <svg className='icon'>\n                                <use xlinkHref={`${svg_icons}` + `${modeCreator ? '#icon-cross' : '#icon-search'}`}></use>\n                            </svg>\n                        </button>\n                        {modeCreator && currentUserURL === userData.user_url ?\n                            <input ref={inputTitleRef} className='title_mod' type='text' maxLength={100} placeholder='titulo a crear' />:\n                            <input onChange={(e) => setCurrentFilter(e.target.value)} className='title_mod' type='text' maxLength={100} placeholder='titulo a buscar' />\n                        }\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div className='post-content__wrapper'>\n                            <div ref={inputContentRef} className='post-content__content' role=\"textbox\" onKeyDown={(e) => handleKeyDown(e)} contentEditable=\"true\"></div>\n                        </div> : ''}\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div className='add-media__wrapper'>\n                            <div {...getRootProps()} className='dropzone'>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-add-photo'}></use>\n                                </svg>\n                                <input {...getInputProps()} />\n                            </div>\n                            <div className='add-media__contens'>\n                                <TempMediaViewer input_media={tempPictures} />\n                            </div>\n                        </div>: ''}\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div className='add-emogy__wrapper'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-kiss'}></use>\n                            </svg>\n                        </div>: ''}\n                        {modeCreator && currentUserURL === userData.user_url ? <hr className='separator full-horizontal'/> : ''}\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div onClick={() => inputTagRef.current.focus()} className='add-tags__wrapper'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-tag'}></use>\n                            </svg>\n                            <hr className='separator bullet'/>\n                            <div className='add-tags'>\n                                <TagsHandler input_tags={currentTags} fullMode={true}/>\n                                <input ref={inputTagRef} type=\"text\" onKeyDown={(e) => handleKeyDown(e, \"tag\")} />\n                            </div>\n                        </div>: ''}\n                        <button disabled={blockedCreator} className='button interaction-option' onClick={modeCreator ? () => save_newPost() : () => setModeCreator(true)}>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-edit'}></use>\n                            </svg>\n                            <p>Nueva publicacion</p>\n                        </button>\n                    </div>\n                    <div className='posts-filter'>\n                        <div className='button-dropdown'>\n                            <div className='button-dropdown__toggler'>\n                                {galleryMode ?\n                                    <div>\n                                        <svg className='icon'>\n                                            <use xlinkHref={svg_icons+'#icon-gallery-view'}></use>\n                                        </svg>\n                                        <span>Vista de galeria</span>\n                                        <svg className='icon arrow'>\n                                            <use xlinkHref={svg_icons+'#icon-arrow'}></use>\n                                        </svg>\n                                    </div> :\n                                    <div>\n                                        <svg className='icon'>\n                                            <use xlinkHref={svg_icons+'#icon-list-view'}></use>\n                                        </svg>\n                                        <span>Vista de Lista</span>\n                                        <svg className='icon arrow'>\n                                            <use xlinkHref={svg_icons+'#icon-arrow'}></use>\n                                        </svg>\n                                    </div>\n                                }\n                            </div>\n                            <div className='button-dropdown__content'>\n                                <button className='option' onClick={() => setGalleryMode(true)}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-gallery-view'}></use>\n                                    </svg>\n                                    <span>Vista de galeria</span>\n                                </button>\n                                <button className='option' onClick={() => setGalleryMode(false)}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-list-view'}></use>\n                                    </svg>\n                                    <span>Vista de Lista</span>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className={`publications ${galleryMode ? 'gallery' : 'list'}`}>\n                    <PostHandler />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nconst InformationSection = () => {\n    return(\n        <div className='publications__wrapper'>INFORMATION</div>\n    );\n}\n\nconst GallerySection = () => {\n    return(\n        <div className='publications__wrapper'>GALLERY</div>\n    );\n}\n\nconst CollectionsSection = () => {\n    return(\n        <div className='publications__wrapper'>COLLECTIONS</div>\n    ); \n}\n\n/*----- Componente central -----*/\nexport const ProfilePanel = () => {\n    const { username } = useParams();\n    const { auth, userData, commonHost } = useContext(AppContext);\n    const [ tabberLoc, setTabberLoc ] = useState('one');\n    const current_url = useLocation();\n    const [ currentPost, setCurrentPost] = useState(null);\n    const [ visiblePostViewer, setVisiblePostViewer ] = useState(false);\n    const [ profileData, setProfileData ] = useState({});\n    const [ base_url, setBase_url ] = useState('');\n    const [ blockedInteraction, setBlockedInteraction ] = useState(false);\n\n    const [ modeProfilePicUpdate, setModeProfilePicUpdate] = useState(false);\n\n    useEffect(() => {\n        if (auth) {\n            if (profileData.user_url) {\n                if (username === profileData.user_url) {\n                    console.error(`${username} === ${profileData.user_url} --> ${username === profileData.user_url}`);\n                } else {\n                    if (username === userData.user_url) {\n                        setProfileData(userData)\n                    } else {\n                        request_ProfileData(auth, username, (error, result) => {\n                            if (error) {\n                                console.log(error)\n                            } else {\n                                setProfileData(result)\n                            }\n                        });\n                    }\n                }\n            } else {\n                if (username === userData.user_url) {\n                    setProfileData(userData)\n                } else {\n                    request_ProfileData(auth, username, (error, result) => {\n                        if (error) {\n                            console.log(error)\n                        } else {\n                            setProfileData(result)\n                        }\n                    });\n                }\n            }\n        }\n        if (username) {\n            setBase_url(`/app/profile/${username}`);\n        }\n    }, [auth, username]);\n\n    useEffect(() => {\n        if (userData) {\n            if (userData.user_url === username) {\n                setBlockedInteraction(true);\n            } else {\n                setBlockedInteraction(false);\n            }\n        } else {\n            console.warn(\"[Profile Panel]:: aun no carga el userData\");\n        }\n    }, [username, userData]);\n\n    useEffect(() => {\n        if (base_url) {\n            if (current_url.pathname === base_url || current_url.pathname === `${base_url}/`) {setTabberLoc('one')} \n            else if (current_url.pathname === `${base_url}/info`) {setTabberLoc('two')}\n            else if (current_url.pathname === `${base_url}/gallery`) {setTabberLoc('three')}\n            else if (current_url.pathname === `${base_url}/collections`) {setTabberLoc('four')}\n        }\n    }, [base_url, current_url.pathname]);\n\n    function side_publication_closer() {\n        setVisiblePostViewer(false);\n        setTimeout(() => {\n            setCurrentPost(null);\n        }, 1000);\n    }\n\n    return(\n        <div className='screen__wrapper'>\n            <div className='panel__wrapper profile-panel'>\n                <div className='profile__content'>\n                    <div className='profile-header__wrapper'>\n                        <div className='header-bg-img__wrapper'>\n                            {profileData.bg_url ?\n                                <img src={profileData.bg_url} alt=\"custom-background\" /> :\n                                <img src={process.env.PUBLIC_URL + '/assets/imgs/loading_background.jpg'} alt=\"default-background\" />\n                            }\n                        </div>\n                        <div className='user-distintion__wrapper'>\n                            <div className='user-avatar profile-style'>\n                                {profileData.profilePic_url ?\n                                    <img src={commonHost+profileData.profilePic_url} alt=\"user_pic\" /> :\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                                    </svg>\n                                }\n                                {userData.user_url === username ?\n                                <button className='button iconed'>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-camera-add'}></use>\n                                    </svg>\n                                </button> :\n                                    \"\"\n                                }\n                            </div>\n                            <div className='user-names'>\n                                <h2>{`${profileData.name} ${profileData.lastName}`}</h2>\n                                <p>HeartPoints: {profileData.heart_points}</p>\n                            </div>\n                            <div className='user-actions'>\n                                <button className='button interaction-option' disabled={blockedInteraction}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-heart-add'}></use>\n                                    </svg>\n                                    <p>Añadir</p>\n                                </button>\n                                <button className='button interaction-option secundary' disabled={blockedInteraction}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-chat'}></use>\n                                    </svg>\n                                    <p>Mensaje</p>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <hr className='separator full-horizontal'/>\n                    <div className='profile-navigation__wrapper'>\n                        <div className={`profile-navigation__content ${tabberLoc}`}>\n                            <Link to={`/app/profile/${username}/`} className={`button tabber ${tabberLoc === 'one' ? 'current' : ''}`}>\n                                Historias\n                            </Link>\n                            <Link to={`/app/profile/${username}/info`} className={`button tabber ${tabberLoc === 'two' ? 'current' : ''}`}>\n                                Informacion\n                            </Link>\n                            <Link to={`/app/profile/${username}/gallery`} className={`button tabber ${tabberLoc === 'three' ? 'current' : ''}`}>\n                                Fotos\n                            </Link>\n                            <Link to={`/app/profile/${username}/collections`} className={`button tabber ${tabberLoc === 'four' ? 'current' : ''}`}>\n                                Colecciones\n                            </Link>\n                        </div>\n                    </div>\n                    <Routes>\n                        <Route path=\"/\" element={<PublicationsSection currentUserURL={username} setter_currentPost={setCurrentPost} getter_currentPost={currentPost}/>} />\n                        <Route path=\"/info\" element={<InformationSection />} />\n                        <Route path=\"/gallery\" element={<GallerySection />} />\n                        <Route path=\"/collections\" element={<CollectionsSection />} />\n                    </Routes>\n                </div>\n            </div>\n            {tabberLoc === 'one' ? \n            <div className={`sub-screen__wrapper half-screen ${visiblePostViewer ? '' : 'hidden'}`}>\n                <div className='exit-half-screen' onClick={() => side_publication_closer()}></div>\n                <SidePublicationViewer publicationInfo={currentPost} setPublicationInfo={setCurrentPost} setter_visibility={setVisiblePostViewer} profileURL={username}/>\n            </div> : ''}\n            {modeProfilePicUpdate ? \n            <div className='sub-screen__wrapper full-screen'>\n                <div>coso</div>\n            </div> : ''\n            }\n            {/* Aqui va el panel para actualizar la portada de perfil*/}\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}