{"ast":null,"code":"/*----- Importaciones y dependencias -----*/import React,{useContext,useEffect,useState}from'react';import{AppContext}from'../../scripts/app_context';import{Routes,Route,Link}from'react-router-dom';import{request_all_userData}from'../../scripts/server_com';/*----- Recursos multimedia -----*/import default_bg from'../../imgs/loading_background.jpg';import svg_icons from'../../icons/svg-resources.xml';/*----- Componentes locales -----*/import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserCard=_ref=>{let{input_userData,input_host}=_ref;if(input_userData){const months=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];const raw_date=new Date(input_userData.birthdate);input_userData.birthdate=\"\".concat(raw_date.getDate().toString().padStart(2,'0'),\" de \").concat(months[raw_date.getMonth()],\" del \").concat(raw_date.getFullYear());}return/*#__PURE__*/_jsxs(\"div\",{\"data-id\":input_userData.user_id,className:\"user-card__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-interaction-top__wrapper\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button left\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-heart-add'})})}),/*#__PURE__*/_jsx(\"button\",{className:\"button right\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-heart-deny'})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-deco__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-background\",children:input_userData.bg_url?/*#__PURE__*/_jsx(\"img\",{src:input_host+input_userData.bg_url,alt:\"custom-background\"}):/*#__PURE__*/_jsx(\"img\",{src:default_bg,alt:\"default-background\"})}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(input_userData.user_url),className:\"user-picture\",children:input_userData.profilePic_url?/*#__PURE__*/_jsx(\"img\",{src:input_host+input_userData.profilePic_url,alt:\"custom-avatar\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-info__wrapper\",children:[/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(input_userData.user_url),className:\"button header_like\",children:\"\".concat(input_userData.name,\" \").concat(input_userData.lastName)}),/*#__PURE__*/_jsxs(\"p\",{className:\"centered\",children:[\"HeartPoints: \",input_userData.heart_points]}),input_userData.phrase?/*#__PURE__*/_jsx(\"p\",{children:input_userData.phrase}):/*#__PURE__*/_jsxs(\"p\",{children:[\"Fecha de nacimiento: \",input_userData.birthdate]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-interaction__wrapper\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/app/profile/\".concat(input_userData.user_url),className:\"button interaction-option\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-heart-paper'})}),/*#__PURE__*/_jsx(\"p\",{children:\"Perfil\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button interaction-option secundary\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-chat'})}),/*#__PURE__*/_jsx(\"p\",{children:\"Mensaje\"})]})]})]});};/*----- Componente central -----*/export const ExplorePanel=()=>{const{auth,userData,commonHost}=useContext(AppContext);const[allUsers,setAllUsers]=useState(null);useEffect(()=>{if(auth){if(!allUsers){console.warn(\"allUsers vacio, solicitando...\");request_all_userData(auth,(error,result)=>{if(error){console.log(error);}else{console.log(\"resultado de la peticion:\");console.log(result);setAllUsers(result);}});}}else{console.warn(\"aun no carga el auth\");}},[auth,allUsers,setAllUsers]);const RenderCards=()=>{const elements=[];if(allUsers){allUsers.forEach((data,index)=>{const ExistingElement=elements.find(element=>element.key===\"card-\".concat(data.user_id));if(data.user_id!==userData.user_id&&!ExistingElement){elements.push(/*#__PURE__*/_jsx(UserCard,{input_userData:data,input_host:commonHost},\"card-\".concat(data.user_id)));}});}else{elements.push(/*#__PURE__*/_jsx(\"h2\",{children:\"sin datos...\"}));}return elements;};return/*#__PURE__*/_jsx(\"div\",{className:\"screen__wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"explore__content\",children:/*#__PURE__*/_jsx(RenderCards,{})})});};","map":{"version":3,"names":["React","useContext","useEffect","useState","AppContext","Routes","Route","Link","request_all_userData","default_bg","svg_icons","jsx","_jsx","jsxs","_jsxs","UserCard","_ref","input_userData","input_host","months","raw_date","Date","birthdate","concat","getDate","toString","padStart","getMonth","getFullYear","user_id","className","children","xlinkHref","bg_url","src","alt","to","user_url","profilePic_url","name","lastName","heart_points","phrase","ExplorePanel","auth","userData","commonHost","allUsers","setAllUsers","console","warn","error","result","log","RenderCards","elements","forEach","data","index","ExistingElement","find","element","key","push"],"sources":["/ufs/walther22wolff/Workspace - Programming/0. Web Applications - Repok/1. NodeJS_React - Repok/heartmate_page/src/components/app_screen_panels/explore_panel.jsx"],"sourcesContent":["/*----- Importaciones y dependencias -----*/\nimport React, { useContext, useEffect, useState } from 'react';\nimport { AppContext } from '../../scripts/app_context';\nimport { Routes, Route, Link } from 'react-router-dom';\n\nimport { request_all_userData } from '../../scripts/server_com';\n\n/*----- Recursos multimedia -----*/\nimport default_bg from '../../imgs/loading_background.jpg';\nimport svg_icons from '../../icons/svg-resources.xml';\n\n/*----- Componentes locales -----*/\nconst UserCard = ({input_userData, input_host}) => {\n    if (input_userData) {\n        const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\n        \n        const raw_date = new Date(input_userData.birthdate)\n\n        input_userData.birthdate = `${raw_date.getDate().toString().padStart(2, '0')} de ${months[raw_date.getMonth()]} del ${raw_date.getFullYear()}`;\n    }\n    return (\n        <div data-id={input_userData.user_id} className='user-card__wrapper'>\n            <div className='user-interaction-top__wrapper'>\n                <button className='button left'>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-heart-add'}></use>\n                    </svg>\n                </button>\n                <button className='button right'>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-heart-deny'}></use>\n                    </svg>\n                </button>\n            </div>\n            <div className='user-deco__wrapper'>\n                <div className='user-background'>\n                    {input_userData.bg_url ?\n                        <img src={input_host + input_userData.bg_url} alt=\"custom-background\" /> :\n                        <img src={default_bg} alt=\"default-background\" />\n                    }\n                </div>\n                <Link to={`/app/profile/${input_userData.user_url}`} className='user-picture'>\n                    {input_userData.profilePic_url ?\n                        <img src={input_host + input_userData.profilePic_url} alt=\"custom-avatar\" /> :\n                        <svg className='icon'>\n                            <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                        </svg>\n                    }\n                </Link>\n            </div>\n            <div className='user-info__wrapper'>\n                <Link to={`/app/profile/${input_userData.user_url}`} className='button header_like'>{`${input_userData.name} ${input_userData.lastName}`}</Link>\n                <p className='centered'>HeartPoints: {input_userData.heart_points}</p>\n                {input_userData.phrase ? \n                    <p>{input_userData.phrase}</p> :\n                    <p>Fecha de nacimiento: {input_userData.birthdate}</p>\n                }\n            </div>\n            <div className='user-interaction__wrapper'>\n                <Link to={`/app/profile/${input_userData.user_url}`} className='button interaction-option'>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-heart-paper'}></use>\n                    </svg>\n                    <p>Perfil</p>\n                </Link>\n                <button className='button interaction-option secundary'>\n                    <svg className='icon'>\n                        <use xlinkHref={svg_icons+'#icon-chat'}></use>\n                    </svg>\n                    <p>Mensaje</p>\n                </button>\n            </div>\n        </div>\n    );\n}\n\n/*----- Componente central -----*/\nexport const ExplorePanel = () => {\n    const { auth, userData, commonHost } = useContext(AppContext);\n    const [ allUsers, setAllUsers ] = useState(null);\n\n    useEffect(() => {\n        if (auth) {\n            if (!allUsers) {\n                console.warn(\"allUsers vacio, solicitando...\")\n                request_all_userData(auth, (error, result) => {\n                    if (error) {\n                        console.log(error)\n                    } else {\n                        console.log(\"resultado de la peticion:\")\n                        console.log(result)\n                        setAllUsers(result)\n                    }\n                });\n            }\n        } else {\n            console.warn(\"aun no carga el auth\");\n        }\n    }, [auth, allUsers, setAllUsers]);\n\n    const RenderCards = () => {\n        const elements = [];\n        if (allUsers) {\n            allUsers.forEach((data, index) => {\n                const ExistingElement = elements.find(element => element.key === `card-${data.user_id}`);\n                if (data.user_id !== userData.user_id && !ExistingElement) {\n                    elements.push(<UserCard key={`card-${data.user_id}`} input_userData={data} input_host={commonHost}/>)\n                }\n            });\n        } else {\n            elements.push(<h2>sin datos...</h2>)\n        }\n        \n        return elements;\n    }\n\n    return(\n        <div className='screen__wrapper'>\n            <div className='explore__content'>\n                <RenderCards />\n            </div>\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}