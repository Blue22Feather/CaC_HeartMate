{"ast":null,"code":"/*----- Importaciones y dependencias -----*/import React,{useContext,useEffect,useState,useRef,useCallback}from'react';import{useParams}from'react-router-dom';import{AppContext}from'../../scripts/app_context';import{Routes,Route,Link,useLocation}from'react-router-dom';import{useDropzone}from'react-dropzone';import{request_userPosts,request_ProfileData,create_newPost,request_publication,request_set_vote}from'../../scripts/server_com';/*----- Recursos multimedia -----*/import default_bg from'../../imgs/loading_background.jpg';import svg_icons from'../../icons/svg-resources.xml';/*----- Funciones Generales -----*/import{jsxs as _jsxs,jsx as _jsx,Fragment as _Fragment}from\"react/jsx-runtime\";function formatedDate(dateString){const raw_date=new Date(dateString);const months=['Enero','Febrero','Marzo','Abril','Mayo','Junio','Julio','Agosto','Septiembre','Octubre','Noviembre','Diciembre'];const formated_date=\"\".concat(raw_date.getDate().toString().padStart(2,'0'),\" de \").concat(months[raw_date.getMonth()],\" del \").concat(raw_date.getFullYear(),\" \\u2022 \").concat(raw_date.getHours(),\":\").concat(raw_date.getMinutes().toString().padStart(2,'0'));return formated_date;}/*----- Componentes Auxiliares -----*/const TagsHandler=_ref=>{let{input_tags,fullMode=false}=_ref;let local_elements=[];if(!fullMode){input_tags.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){if(local_elements.length<3){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"tagLabel\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"#\",data]})},index));}else if(local_elements.length<4&&input_tags.length>=4){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"tagLabel\",children:/*#__PURE__*/_jsx(\"p\",{children:\"+\".concat(input_tags.length-3)})},4));}}});}else{input_tags.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"tagLabel\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"#\",data]})},index));}});}return local_elements;};const PointsHandler=_ref2=>{let{postsInfo_setter,input_points,input_id,input_userURL,authen_info}=_ref2;function handle_votes(vote_type){if(vote_type===\"up\"){if(input_points.current_user===\"true\"){request_set_vote(authen_info,\"remove\",input_userURL,input_id,(error,result)=>{if(error){console.log(error);}else{postsInfo_setter(prevDatos=>{if(Array.isArray(prevDatos)){const nuevosDatos=prevDatos.map((objeto,index)=>{if(index===input_id){return{...objeto,content:{...objeto.content,points:{total:result.total,current_user:result.current_user}}};}return objeto;// Devolver el objeto sin cambios si no es el índice deseado\n});return nuevosDatos;}else if(typeof prevDatos==='object'&&!Array.isArray(prevDatos)){const nuevosDatos={...prevDatos,content:{...prevDatos.content,points:{total:result.total,current_user:result.current_user}}};return nuevosDatos;}else{return prevDatos;}});}});}else{request_set_vote(authen_info,\"true\",input_userURL,input_id,(error,result)=>{if(error){console.log(error);}else{postsInfo_setter(prevDatos=>{if(Array.isArray(prevDatos)){const nuevosDatos=prevDatos.map((objeto,index)=>{if(index===input_id){return{...objeto,content:{...objeto.content,points:{total:result.total,current_user:result.current_user}}};}return objeto;// Devolver el objeto sin cambios si no es el índice deseado\n});return nuevosDatos;}else if(typeof prevDatos==='object'&&!Array.isArray(prevDatos)){const nuevosDatos={...prevDatos,content:{...prevDatos.content,points:{total:result.total,current_user:result.current_user}}};return nuevosDatos;}else{return prevDatos;}});}});}}else if(vote_type===\"down\"){if(input_points.current_user===\"false\"){request_set_vote(authen_info,\"remove\",input_userURL,input_id,(error,result)=>{if(error){console.log(error);}else{postsInfo_setter(prevDatos=>{if(Array.isArray(prevDatos)){const nuevosDatos=prevDatos.map((objeto,index)=>{if(index===input_id){return{...objeto,content:{...objeto.content,points:{total:result.total,current_user:result.current_user}}};}return objeto;// Devolver el objeto sin cambios si no es el índice deseado\n});return nuevosDatos;}else if(typeof prevDatos==='object'&&!Array.isArray(prevDatos)){const nuevosDatos={...prevDatos,content:{...prevDatos.content,points:{total:result.total,current_user:result.current_user}}};return nuevosDatos;}else{return prevDatos;}});}});}else{request_set_vote(authen_info,\"false\",input_userURL,input_id,(error,result)=>{if(error){console.log(error);}else{postsInfo_setter(prevDatos=>{if(Array.isArray(prevDatos)){const nuevosDatos=prevDatos.map((objeto,index)=>{if(index===input_id){return{...objeto,content:{...objeto.content,points:{total:result.total,current_user:result.current_user}}};}return objeto;// Devolver el objeto sin cambios si no es el índice deseado\n});return nuevosDatos;}else if(typeof prevDatos==='object'&&!Array.isArray(prevDatos)){const nuevosDatos={...prevDatos,content:{...prevDatos.content,points:{total:result.total,current_user:result.current_user}}};return nuevosDatos;}else{return prevDatos;}});}});}}}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handle_votes(\"up\"),className:\"button iconed \".concat(input_points.current_user===\"true\"?'voted':''),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-pointer'})})}),/*#__PURE__*/_jsx(\"p\",{children:input_points.total}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handle_votes(\"down\"),className:\"button iconed down \".concat(input_points.current_user===\"false\"?'voted':''),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-pointer'})})})]});};/*----- Componentes locales -----*/const SidePublicationViewer=_ref3=>{let{getter_currentPost,setter_visibility,setter_currentPost,profileURL}=_ref3;const[publicationInfo,setPublicationInfo]=useState(null);const{commonHost,auth}=useContext(AppContext);useEffect(()=>{if(getter_currentPost){request_publication(auth,profileURL,getter_currentPost,(error,result)=>{if(error){console.log(error);}else{setPublicationInfo(result);setter_visibility(true);}});}},[getter_currentPost]);function close_handler(){setter_visibility(false);setter_currentPost(null);setTimeout(()=>{setPublicationInfo(null);},1000);}const PublicationCommentsHandler=_ref4=>{let{input_commentsData}=_ref4;const local_elements=[];if(input_commentsData.comments_data){input_commentsData.comments_data.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){local_elements.push(/*#__PURE__*/_jsxs(\"div\",{className:\"message__wrapper forum-style\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar msg-style\",children:data.profilePic_url?/*#__PURE__*/_jsx(\"img\",{src:data.profilePic_url,alt:\"user_pic\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"msg-metadata__wrapper\",children:[/*#__PURE__*/_jsx(\"h3\",{children:data.author}),/*#__PURE__*/_jsx(\"p\",{children:data.createdDate})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"msg-content__wrapper\",children:[data.content?/*#__PURE__*/_jsx(\"section\",{children:data.content}):'',data.media?/*#__PURE__*/_jsx(\"section\",{children:data.media}):'']})]},index));}});}else{local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"null-contents__wrapper\",children:\"nada por aqui OwO\"}));}return local_elements;};if(publicationInfo){return/*#__PURE__*/_jsx(\"div\",{className:\"publication-viewer__wrapper \",children:/*#__PURE__*/_jsxs(\"div\",{className:\"publication__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"publication__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"publication_title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:publicationInfo.content.title}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-vertical\"}),/*#__PURE__*/_jsx(\"p\",{children:publicationInfo.content.createdDate})]}),/*#__PURE__*/_jsx(\"div\",{className:\"publication_options\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:close_handler,children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-cross'})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"publication__contents\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"content__author\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar publication-style\",children:publicationInfo.content.author_pic?/*#__PURE__*/_jsx(\"img\",{src:commonHost+publicationInfo.content.author_pic,alt:\"user_pic\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})})}),/*#__PURE__*/_jsx(\"p\",{className:\"author-label\",children:publicationInfo.content.author})]}),/*#__PURE__*/_jsx(\"div\",{className:\"content__title\",children:/*#__PURE__*/_jsx(\"h2\",{children:publicationInfo.content.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"content__tags\",children:/*#__PURE__*/_jsx(TagsHandler,{input_tags:publicationInfo.content.tags,fullMode:true})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-horizontal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"content__text\",children:publicationInfo.content.content.map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"content__media\",children:publicationInfo.content.media?publicationInfo.content.media.map((image,index)=>/*#__PURE__*/_jsx(\"img\",{src:commonHost+image,alt:\"Publication media \".concat(index)})):''}),/*#__PURE__*/_jsx(\"div\",{className:\"content__footer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"points-section\",children:/*#__PURE__*/_jsx(PointsHandler,{authen_info:auth,postsInfo_setter:setPublicationInfo,input_points:publicationInfo.content.points,input_id:publicationInfo.content.id,input_userURL:profileURL})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"publication__comments\",children:/*#__PURE__*/_jsx(PublicationCommentsHandler,{input_commentsData:publicationInfo.comments})})]})});}};const PublicationsSection=_ref5=>{let{currentUserURL,setter_currentPost}=_ref5;const[galleryElements,setGalleryElements]=useState([]);const[listElements,setListElements]=useState([]);const[galleryMode,setGalleryMode]=useState(true);const{commonHost,auth,userData,localCounter}=useContext(AppContext);const inputTagRef=useRef(null);const[localLoading,setLocalLoading]=useState(true);const[modeCreator,setModeCreator]=useState(false);const[blockedCreator,setBlockedCreator]=useState(false);const[postsInfo,setPostsInfo]=useState([]);const[postUpdater,setPostUpdater]=useState(0);const[currentTags,setCurrentTags]=useState([]);const[currentTitle,setCurrentTitle]=useState('');const[currentContent,setCurrentContent]=useState('');const[currentFilter,setCurrentFilter]=useState('');/* Manejo de imagen */const acceptedFileTypes=['image/png','image/jpeg','image/webp'];const maxSize=5*1024*1024;// 5MB\nconst[pictureFiles,setPictureFiles]=useState([]);const[tempPictures,setTempPictures]=useState([]);const onDrop=useCallback(Files=>{Files.forEach((file,index)=>{if(files_validation(file)){const fileURL=URL.createObjectURL(file);setTempPictures(prevLista=>prevLista.concat(fileURL));setPictureFiles(prevLista=>prevLista.concat(file));}else{console.log(\"validacion pasada, resultado erroneo\");}});},[]);const{getRootProps,getInputProps}=useDropzone({onDrop});useEffect(()=>{if(!localLoading){setLocalLoading(true);}if(auth){request_userPosts(auth,currentUserURL,(error,result)=>{if(error){if(error.data.error===\"NULL_POSTS\"){setGalleryElements([/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-bad-list'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones en este perfil\"})]},\"null-banner\")]);setListElements([/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-bad-list'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones en este perfil\"})]},\"null-banner\")]);setLocalLoading(false);}else{console.error(error);}}else{setPostsInfo(result);}});}else{console.warn(\"[PublicationsSection]:: Aun no carga el auth...\");}},[auth,currentUserURL,postUpdater,localCounter]);useEffect(()=>{if(postsInfo){if(galleryElements.find(element=>element.key==='null-banner')){setGalleryElements([]);}if(listElements.find(element=>element.key==='null-banner')){setListElements([]);}postsInfo.forEach((data,index)=>{const galleryExistingElement=galleryElements.find(element=>element.key===\"card-gallery-\".concat(data.id));const listExistingElement=listElements.find(element=>element.key===\"card-list-\".concat(data.id));if(!galleryExistingElement){setGalleryElements(prevLista=>prevLista.concat(/*#__PURE__*/_jsx(GalleryView,{setter_input_post:setPostsInfo,input_post:data,input_host:commonHost},\"card-gallery-\".concat(data.id))));}if(!listExistingElement){setListElements(prevLista=>prevLista.concat(/*#__PURE__*/_jsx(ListView,{setter_input_post:setPostsInfo,input_post:data,input_host:commonHost},\"card-list-\".concat(data.id))));}});setLocalLoading(false);}},[postsInfo,currentUserURL,setPostsInfo]);useEffect(()=>{if(userData.user_url){if(userData.user_url===currentUserURL){setBlockedCreator(false);}else{setBlockedCreator(true);}}},[currentUserURL,userData]);const ListView=_ref6=>{let{input_post,input_host,setter_input_post}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setter_currentPost(input_post.id),\"data-id\":input_post.id,className:\"card__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card__header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_tags\",children:/*#__PURE__*/_jsx(TagsHandler,{input_tags:input_post.tags})}),/*#__PURE__*/_jsx(\"h3\",{className:\"post_title\",children:input_post.title})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card__postBody\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"post_content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_author\",children:/*#__PURE__*/_jsxs(\"p\",{children:[input_post.author,\":\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"post_content-text\",children:/*#__PURE__*/_jsx(\"p\",{children:input_post.content})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__footer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_points\",children:/*#__PURE__*/_jsx(PointsHandler,{postsInfo_setter:setter_input_post,authen_info:auth,input_points:input_post.points,input_id:input_post.id,input_userURL:currentUserURL})}),/*#__PURE__*/_jsxs(\"div\",{className:\"post_comments-number\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-comment'})}),/*#__PURE__*/_jsx(\"p\",{children:input_post.n_comments})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_date\",children:/*#__PURE__*/_jsx(\"p\",{children:formatedDate(input_post.createdDate)})})]})]}),input_post.media?/*#__PURE__*/_jsx(\"div\",{className:\"card__media\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+input_post.media[0],alt:\"Publication main media\"})}):'']});};const GalleryView=_ref7=>{let{input_post,input_host,setter_input_post}=_ref7;const PicturesHandler=_ref8=>{let{input_images}=_ref8;let local_elements=[];input_images.forEach((data,index)=>{const localExisting_element=local_elements.find(element=>element.key===index);if(!localExisting_element){if(local_elements.length<4){if(input_images.length===1){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection full-column full-row\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(1)})},index));}else if(input_images.length===2){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection full-column\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}else if(input_images.length===3){if(index===0){local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection full-column\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}else{local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}}else{local_elements.push(/*#__PURE__*/_jsx(\"div\",{className:\"imageSection\",children:/*#__PURE__*/_jsx(\"img\",{src:input_host+data,alt:\"Publication media \".concat(index)})},index));}}}});return local_elements;};return/*#__PURE__*/_jsxs(\"div\",{\"data-id\":input_post.id,className:\"card__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setter_currentPost(input_post.id),className:\"card__header\",children:[/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"post_author\",children:/*#__PURE__*/_jsx(\"p\",{children:input_post.author})}),/*#__PURE__*/_jsx(\"p\",{className:\"post_date\",children:formatedDate(input_post.createdDate)})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"post_title\",children:input_post.title})]}),/*#__PURE__*/_jsxs(\"div\",{onClick:()=>setter_currentPost(input_post.id),className:\"card__postBody\",children:[input_post.media?/*#__PURE__*/_jsx(\"div\",{className:\"body-media\",children:/*#__PURE__*/_jsx(PicturesHandler,{input_images:input_post.media})}):/*#__PURE__*/_jsx(\"div\",{className:\"post_content-text\",children:input_post.content.map((paragraph,index)=>/*#__PURE__*/_jsx(\"p\",{children:paragraph},index))}),/*#__PURE__*/_jsx(\"div\",{className:\"post_tags\",children:/*#__PURE__*/_jsx(TagsHandler,{input_tags:input_post.tags})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card__footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post_comments-number\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-comment'})}),/*#__PURE__*/_jsx(\"p\",{children:input_post.n_comments})]}),/*#__PURE__*/_jsx(\"div\",{className:\"post_points\",children:/*#__PURE__*/_jsx(PointsHandler,{postsInfo_setter:setter_input_post,authen_info:auth,input_points:input_post.points,input_id:input_post.id,input_userURL:currentUserURL})})]})]});};const TempMediaViewer=_ref9=>{let{input_media}=_ref9;let local_elements=[];function delete_temp_file(index_file){const newLocal_elements=local_elements.filter((value,index,arr)=>{return index!==index_file;});local_elements=newLocal_elements;const newPicturesFiles=pictureFiles.filter((value,index,arr)=>{return index!==index_file;});setPictureFiles(newPicturesFiles);const newTempPictures=tempPictures.filter((value,index,arr)=>{return index!==index_file;});setTempPictures(newTempPictures);}input_media.forEach((data,index)=>{local_elements.push(/*#__PURE__*/_jsxs(\"div\",{\"data-id\":\"button-for-media-\".concat(index),className:\"imagePreview\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:()=>delete_temp_file(index),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-discard'})})}),/*#__PURE__*/_jsx(\"img\",{src:data,alt:\"Temporal media \".concat(index)})]},index));});return local_elements;};const PostHandler=()=>{if(localLoading){return/*#__PURE__*/_jsx(\"h2\",{children:\"Cargando...\"});}else{if(galleryMode){if(currentFilter){const result=galleryElements.filter(tarjeta=>tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()));if(result.length>0){return result;}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-binocular'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones que coincidan\"})]});}}else{return galleryElements;}}else{if(currentFilter){const result=listElements.filter(tarjeta=>tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()));if(result.length>0){return result;}else{return/*#__PURE__*/_jsxs(\"div\",{className:\"empty-msg\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-binocular'})}),/*#__PURE__*/_jsx(\"h2\",{children:\"No hay publicaciones que coincidan\"})]});}}else{return listElements;}}}};function handleKeyDown(event){let mode=arguments.length>1&&arguments[1]!==undefined?arguments[1]:\"msg\";if(mode===\"msg\"){if(event.key==='Enter'&&!event.shiftKey){event.preventDefault();const message=event.target.innerText;console.log(message);//sendDataToServer();\n//sendDataToServer(message);\n}}else if(mode===\"tag\"){if(event.key===' '||event.key==='Enter'){event.preventDefault();const raw_tags=event.target.value.split(' ');raw_tags.forEach(tag=>{if(!currentTags.includes(tag)&&currentTags.length<9){setCurrentTags(prevLista=>prevLista.concat(tag));}else if(!currentTags.length<9){console.warn(\"maximo 9 etiquetas!\");}});event.target.value='';}else if(event.key==='Backspace'){setCurrentTags(prevLista=>prevLista.slice(0,-1));}}};function files_validation(element){if(pictureFiles.length>9){console.log('maximo 9 archivos');return false;}else{if(!element){return false;}else if(!acceptedFileTypes.includes(element.type)){console.log('Archivo no válido (tipo MIME)');return false;}else if(element.size>maxSize){console.log('Archivo excede tamaño máximo');return false;}else{return true;}}}function save_newPost(){if(currentTitle){if(currentTags.length>0){if(currentContent&&currentContent!==\"\\n\"||pictureFiles.length>0){let local_media;if(pictureFiles.length>0){local_media=pictureFiles;}else{local_media=null;}let local_content;if(currentContent===\"\\n\"){local_content=null;}else{local_content=currentContent;}let local_tags=currentTags.join(\",\");create_newPost(auth,{title:currentTitle,content:local_content,tags:local_tags},local_media,userData.user_url,(error,result)=>{if(error){console.log(error);}else{setPostUpdater(prevContador=>prevContador+1);}});}else{console.error(\"contenidos vacios\");}}else{console.error(\"etiquetas vacias\");}}else{console.error(\"titulo vacio\");}}return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"publications__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"post-interaction \".concat(modeCreator&&currentUserURL===userData.user_url?'create':'search'),children:[/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",onClick:()=>setModeCreator(false),children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:\"\".concat(svg_icons)+\"\".concat(modeCreator?'#icon-cross':'#icon-search')})})}),modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"input\",{className:\"title_mod\",type:\"text\",maxLength:100,onBlur:e=>setCurrentTitle(e.target.value),placeholder:\"titulo a crear\"}):/*#__PURE__*/_jsx(\"input\",{onChange:e=>setCurrentFilter(e.target.value),className:\"title_mod\",type:\"text\",maxLength:100,placeholder:\"titulo a buscar\"}),modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"div\",{className:\"post-content__wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"post-content__content\",role:\"textbox\",onBlur:e=>setCurrentContent(e.target.innerText),onKeyDown:e=>handleKeyDown(e),contentEditable:\"true\"})}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsxs(\"div\",{className:\"add-media__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{...getRootProps(),className:\"dropzone\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-add-photo'})}),/*#__PURE__*/_jsx(\"input\",{...getInputProps()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"add-media__contens\",children:/*#__PURE__*/_jsx(TempMediaViewer,{input_media:tempPictures})})]}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"div\",{className:\"add-emogy__wrapper\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-kiss'})})}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-horizontal\"}):'',modeCreator&&currentUserURL===userData.user_url?/*#__PURE__*/_jsxs(\"div\",{onClick:()=>inputTagRef.current.focus(),className:\"add-tags__wrapper\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-tag'})}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator bullet\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-tags\",children:[/*#__PURE__*/_jsx(TagsHandler,{input_tags:currentTags,fullMode:true}),/*#__PURE__*/_jsx(\"input\",{ref:inputTagRef,type:\"text\",onKeyDown:e=>handleKeyDown(e,\"tag\")})]})]}):'',/*#__PURE__*/_jsxs(\"button\",{disabled:blockedCreator,className:\"button interaction-option\",onClick:modeCreator?()=>save_newPost():()=>setModeCreator(true),children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-edit'})}),/*#__PURE__*/_jsx(\"p\",{children:\"Nueva publicacion\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"posts-filter\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"button-dropdown\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-dropdown__toggler\",children:galleryMode?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-gallery-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de galeria\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"icon arrow\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-arrow'})})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-list-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de Lista\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"icon arrow\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-arrow'})})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-dropdown__content\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"option\",onClick:()=>setGalleryMode(true),children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-gallery-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de galeria\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"option\",onClick:()=>setGalleryMode(false),children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-list-view'})}),/*#__PURE__*/_jsx(\"span\",{children:\"Vista de Lista\"})]})]})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"publications \".concat(galleryMode?'gallery':'list'),children:/*#__PURE__*/_jsx(PostHandler,{})})]})});};const InformationSection=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:\"INFORMATION\"});};const GallerySection=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:\"GALLERY\"});};const CollectionsSection=()=>{return/*#__PURE__*/_jsx(\"div\",{className:\"publications__wrapper\",children:\"COLLECTIONS\"});};/*----- Componente central -----*/export const ProfilePanel=()=>{const{username}=useParams();const{auth,userData,commonHost}=useContext(AppContext);const[tabberLoc,setTabberLoc]=useState('one');const current_url=useLocation();const[currentPost,setCurrentPost]=useState(null);const[visiblePostViewer,setVisiblePostViewer]=useState(false);const[profileData,setProfileData]=useState({});const[base_url,setBase_url]=useState('');const[blockedInteraction,setBlockedInteraction]=useState(false);const[modeProfilePicUpdate,setModeProfilePicUpdate]=useState(false);useEffect(()=>{if(auth){console.warn(\"en el auth...\");if(profileData.user_url){console.warn(\"el profiledata contiene un url ya cargado\");if(username===profileData.user_url){console.error(\"\".concat(username,\" === \").concat(profileData.user_url,\" --> \").concat(username===profileData.user_url));console.log(profileData);}else{console.warn(\"solicitando datos de usuario | el username no es igual al de profiledata\");if(username===userData.user_url){console.warn(\"el username es igual al usuario logeado\");setProfileData(userData);}else{request_ProfileData(auth,username,(error,result)=>{if(error){console.log(error);}else{setProfileData(result);}});}}}else{console.warn(\"el username no es igual al userdata y tampoco existe url en profiledata\");if(username===userData.user_url){console.warn(\"el username es igual al usuario logeado\");setProfileData(userData);}else{request_ProfileData(auth,username,(error,result)=>{if(error){console.log(error);}else{setProfileData(result);}});}}}if(username){setBase_url(\"/app/profile/\".concat(username));}console.error(username);},[auth,username]);useEffect(()=>{if(userData){if(userData.user_url===username){setBlockedInteraction(true);}else{setBlockedInteraction(false);}}else{console.warn(\"[Profile Panel]:: aun no carga el userData\");}},[username,userData]);useEffect(()=>{if(base_url){if(current_url.pathname===base_url||current_url.pathname===\"\".concat(base_url,\"/\")){setTabberLoc('one');}else if(current_url.pathname===\"\".concat(base_url,\"/info\")){setTabberLoc('two');}else if(current_url.pathname===\"\".concat(base_url,\"/gallery\")){setTabberLoc('three');}else if(current_url.pathname===\"\".concat(base_url,\"/collections\")){setTabberLoc('four');}}},[base_url,current_url.pathname]);return/*#__PURE__*/_jsxs(\"div\",{className:\"screen__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"panel__wrapper profile-panel\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-header__wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-bg-img__wrapper\",children:profileData.bg_url?/*#__PURE__*/_jsx(\"img\",{src:profileData.bg_url,alt:\"custom-background\"}):/*#__PURE__*/_jsx(\"img\",{src:default_bg,alt:\"default-background\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-distintion__wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-avatar profile-style\",children:[profileData.profilePic_url?/*#__PURE__*/_jsx(\"img\",{src:commonHost+profileData.profilePic_url,alt:\"user_pic\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-empty-user'})}),userData.user_url===username?/*#__PURE__*/_jsx(\"button\",{className:\"button iconed\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-camera-add'})})}):\"\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-names\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\".concat(profileData.name,\" \").concat(profileData.lastName)}),/*#__PURE__*/_jsxs(\"p\",{children:[\"HeartPoints: \",profileData.heart_points]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button interaction-option\",disabled:blockedInteraction,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-heart-add'})}),/*#__PURE__*/_jsx(\"p\",{children:\"A\\xF1adir\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button interaction-option secundary\",disabled:blockedInteraction,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"icon\",children:/*#__PURE__*/_jsx(\"use\",{xlinkHref:svg_icons+'#icon-chat'})}),/*#__PURE__*/_jsx(\"p\",{children:\"Mensaje\"})]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"separator full-horizontal\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-navigation__wrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"profile-navigation__content \".concat(tabberLoc),children:[/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/\"),className:\"button tabber \".concat(tabberLoc==='one'?'current':''),children:\"Historias\"}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/info\"),className:\"button tabber \".concat(tabberLoc==='two'?'current':''),children:\"Informacion\"}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/gallery\"),className:\"button tabber \".concat(tabberLoc==='three'?'current':''),children:\"Fotos\"}),/*#__PURE__*/_jsx(Link,{to:\"/app/profile/\".concat(username,\"/collections\"),className:\"button tabber \".concat(tabberLoc==='four'?'current':''),children:\"Colecciones\"})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(PublicationsSection,{currentUserURL:username,setter_currentPost:setCurrentPost})}),/*#__PURE__*/_jsx(Route,{path:\"/info\",element:/*#__PURE__*/_jsx(InformationSection,{})}),/*#__PURE__*/_jsx(Route,{path:\"/gallery\",element:/*#__PURE__*/_jsx(GallerySection,{})}),/*#__PURE__*/_jsx(Route,{path:\"/collections\",element:/*#__PURE__*/_jsx(CollectionsSection,{})})]})]})}),tabberLoc==='one'?/*#__PURE__*/_jsxs(\"div\",{className:\"sub-screen__wrapper half-screen \".concat(visiblePostViewer?'':'hidden'),children:[/*#__PURE__*/_jsx(\"div\",{className:\"exit-half-screen\",onClick:()=>setVisiblePostViewer(false)}),/*#__PURE__*/_jsx(SidePublicationViewer,{getter_currentPost:currentPost,setter_visibility:setVisiblePostViewer,setter_currentPost:setCurrentPost,profileURL:username})]}):'',modeProfilePicUpdate?/*#__PURE__*/_jsx(\"div\",{className:\"sub-screen__wrapper full-screen\",children:/*#__PURE__*/_jsx(\"div\",{children:\"coso\"})}):'']});};","map":{"version":3,"names":["React","useContext","useEffect","useState","useRef","useCallback","useParams","AppContext","Routes","Route","Link","useLocation","useDropzone","request_userPosts","request_ProfileData","create_newPost","request_publication","request_set_vote","default_bg","svg_icons","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","formatedDate","dateString","raw_date","Date","months","formated_date","concat","getDate","toString","padStart","getMonth","getFullYear","getHours","getMinutes","TagsHandler","_ref","input_tags","fullMode","local_elements","forEach","data","index","localExisting_element","find","element","key","length","push","className","children","PointsHandler","_ref2","postsInfo_setter","input_points","input_id","input_userURL","authen_info","handle_votes","vote_type","current_user","error","result","console","log","prevDatos","Array","isArray","nuevosDatos","map","objeto","content","points","total","onClick","xlinkHref","SidePublicationViewer","_ref3","getter_currentPost","setter_visibility","setter_currentPost","profileURL","publicationInfo","setPublicationInfo","commonHost","auth","close_handler","setTimeout","PublicationCommentsHandler","_ref4","input_commentsData","comments_data","profilePic_url","src","alt","author","createdDate","media","title","author_pic","tags","paragraph","image","id","comments","PublicationsSection","_ref5","currentUserURL","galleryElements","setGalleryElements","listElements","setListElements","galleryMode","setGalleryMode","userData","localCounter","inputTagRef","localLoading","setLocalLoading","modeCreator","setModeCreator","blockedCreator","setBlockedCreator","postsInfo","setPostsInfo","postUpdater","setPostUpdater","currentTags","setCurrentTags","currentTitle","setCurrentTitle","currentContent","setCurrentContent","currentFilter","setCurrentFilter","acceptedFileTypes","maxSize","pictureFiles","setPictureFiles","tempPictures","setTempPictures","onDrop","Files","file","files_validation","fileURL","URL","createObjectURL","prevLista","getRootProps","getInputProps","warn","galleryExistingElement","listExistingElement","GalleryView","setter_input_post","input_post","input_host","ListView","user_url","_ref6","n_comments","_ref7","PicturesHandler","_ref8","input_images","TempMediaViewer","_ref9","input_media","delete_temp_file","index_file","newLocal_elements","filter","value","arr","newPicturesFiles","newTempPictures","PostHandler","tarjeta","props","toLowerCase","includes","handleKeyDown","event","mode","arguments","undefined","shiftKey","preventDefault","message","target","innerText","raw_tags","split","tag","slice","type","size","save_newPost","local_media","local_content","local_tags","join","prevContador","maxLength","onBlur","e","placeholder","onChange","role","onKeyDown","contentEditable","current","focus","ref","disabled","InformationSection","GallerySection","CollectionsSection","ProfilePanel","username","tabberLoc","setTabberLoc","current_url","currentPost","setCurrentPost","visiblePostViewer","setVisiblePostViewer","profileData","setProfileData","base_url","setBase_url","blockedInteraction","setBlockedInteraction","modeProfilePicUpdate","setModeProfilePicUpdate","pathname","bg_url","name","lastName","heart_points","to","path"],"sources":["/ufs/walther22wolff/Workspace - Programming/0. Web Applications - Repok/1. NodeJS_React - Repok/heartmate_page/src/components/app_screen_panels/profile_panel.jsx"],"sourcesContent":["/*----- Importaciones y dependencias -----*/\nimport React, { useContext, useEffect, useState, useRef, useCallback } from 'react';\nimport { useParams } from 'react-router-dom'\nimport { AppContext } from '../../scripts/app_context';\nimport { Routes, Route, Link, useLocation } from 'react-router-dom';\nimport { useDropzone } from 'react-dropzone';\n\nimport { request_userPosts, request_ProfileData, create_newPost, request_publication, request_set_vote } from '../../scripts/server_com';\n\n/*----- Recursos multimedia -----*/\nimport default_bg from '../../imgs/loading_background.jpg';\nimport svg_icons from '../../icons/svg-resources.xml';\n\n/*----- Funciones Generales -----*/\nfunction formatedDate(dateString){\n    const raw_date = new Date(dateString);\n    const months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\n\n    const formated_date = `${raw_date.getDate().toString().padStart(2, '0')} de ${months[raw_date.getMonth()]} del ${raw_date.getFullYear()} • ${raw_date.getHours()}:${raw_date.getMinutes().toString().padStart(2, '0')}`;\n\n    return formated_date\n}\n\n/*----- Componentes Auxiliares -----*/\nconst TagsHandler = ({input_tags, fullMode=false}) => {\n    let local_elements = [];\n    if (!fullMode) {\n        input_tags.forEach((data, index) => {\n            const localExisting_element = local_elements.find(element => element.key === index);\n            if (!localExisting_element) {\n                if (local_elements.length < 3 ) {\n                    local_elements.push(\n                        <div key={index} className='tagLabel'><p>#{data}</p></div>\n                    )\n                } else if (local_elements.length < 4 && input_tags.length >= 4) {\n                    local_elements.push(\n                        <div key={4} className='tagLabel'><p>{`+${input_tags.length - 3}`}</p></div>\n                    )\n                }\n            }\n        });\n    } else {\n        input_tags.forEach((data, index) => {\n            const localExisting_element = local_elements.find(element => element.key === index);\n            if (!localExisting_element) {\n                local_elements.push(\n                    <div key={index} className='tagLabel'><p>#{data}</p></div>\n                )\n            }\n        });\n    }\n\n    return local_elements;\n}\n\nconst PointsHandler = ({postsInfo_setter, input_points, input_id, input_userURL, authen_info }) => {\n\n    function handle_votes (vote_type) {\n        if (vote_type === \"up\") {\n            if (input_points.current_user === \"true\") {\n                request_set_vote(authen_info, \"remove\", input_userURL, input_id, (error, result) => {\n                    if (error) {\n                        console.log(error)\n                    } else {\n                        postsInfo_setter(prevDatos => {\n                            if (Array.isArray(prevDatos)) {\n                                const nuevosDatos = prevDatos.map((objeto, index) => {\n                                    if (index === input_id) {\n                                        return {\n                                            ...objeto,\n                                            content: {\n                                                ...objeto.content,\n                                                points: {\n                                                    total: result.total,\n                                                    current_user: result.current_user\n                                                }\n                                            }\n                                        };\n                                    }\n                                    return objeto; // Devolver el objeto sin cambios si no es el índice deseado\n                                });\n\n                                return nuevosDatos;\n                            } else if (typeof prevDatos === 'object' && !Array.isArray(prevDatos)) {\n                                const nuevosDatos = {\n                                    ...prevDatos,\n                                    content: {\n                                        ...prevDatos.content,\n                                        points: {\n                                            total: result.total,\n                                            current_user: result.current_user\n                                        }\n                                    }\n                                }\n                        \n                                return nuevosDatos;\n                            } else {\n                                return prevDatos;\n                            }\n                        });\n                    }\n                });\n            } else {\n                request_set_vote(authen_info, \"true\", input_userURL, input_id, (error, result) => {\n                    if (error) {\n                        console.log(error)\n                    } else {\n                        postsInfo_setter(prevDatos => {\n                            if (Array.isArray(prevDatos)) {\n                                const nuevosDatos = prevDatos.map((objeto, index) => {\n                                    if (index === input_id) {\n                                        return {\n                                            ...objeto,\n                                            content: {\n                                                ...objeto.content,\n                                                points: {\n                                                    total: result.total,\n                                                    current_user: result.current_user\n                                                }\n                                            }\n                                        };\n                                    }\n                                    return objeto; // Devolver el objeto sin cambios si no es el índice deseado\n                                });\n\n                                return nuevosDatos;\n                            } else if (typeof prevDatos === 'object' && !Array.isArray(prevDatos)) {\n                                const nuevosDatos = {\n                                    ...prevDatos,\n                                    content: {\n                                        ...prevDatos.content,\n                                        points: {\n                                            total: result.total,\n                                            current_user: result.current_user\n                                        }\n                                    }\n                                }\n                        \n                                return nuevosDatos;\n                            } else {\n                                return prevDatos;\n                            }\n                        });\n                    }\n                });\n            }\n        } else if (vote_type === \"down\") {\n            if (input_points.current_user === \"false\") {\n                request_set_vote(authen_info, \"remove\", input_userURL, input_id, (error, result) => {\n                    if (error) {\n                        console.log(error)\n                    } else {\n                        postsInfo_setter(prevDatos => {\n                            if (Array.isArray(prevDatos)) {\n                                const nuevosDatos = prevDatos.map((objeto, index) => {\n                                    if (index === input_id) {\n                                        return {\n                                            ...objeto,\n                                            content: {\n                                                ...objeto.content,\n                                                points: {\n                                                    total: result.total,\n                                                    current_user: result.current_user\n                                                }\n                                            }\n                                        };\n                                    }\n                                    return objeto; // Devolver el objeto sin cambios si no es el índice deseado\n                                });\n                        \n                                return nuevosDatos;\n                            } else if (typeof prevDatos === 'object' && !Array.isArray(prevDatos)) {\n                                const nuevosDatos = {\n                                    ...prevDatos,\n                                    content: {\n                                        ...prevDatos.content,\n                                        points: {\n                                            total: result.total,\n                                            current_user: result.current_user\n                                        }\n                                    }\n                                }\n                        \n                                return nuevosDatos;\n                            } else {\n                                return prevDatos;\n                            }\n                        });\n                    }\n                });\n            } else {\n                request_set_vote(authen_info, \"false\", input_userURL, input_id, (error, result) => {\n                    if (error) {\n                        console.log(error)\n                    } else {\n                        postsInfo_setter(prevDatos => {\n                            if (Array.isArray(prevDatos)) {\n                                const nuevosDatos = prevDatos.map((objeto, index) => {\n                                    if (index === input_id) {\n                                        return {\n                                            ...objeto,\n                                            content: {\n                                                ...objeto.content,\n                                                points: {\n                                                    total: result.total,\n                                                    current_user: result.current_user\n                                                }\n                                            }\n                                        };\n                                    }\n                                    return objeto; // Devolver el objeto sin cambios si no es el índice deseado\n                                });\n\n                                return nuevosDatos;\n                            } else if (typeof prevDatos === 'object' && !Array.isArray(prevDatos)) {\n                                const nuevosDatos = {\n                                    ...prevDatos,\n                                    content: {\n                                        ...prevDatos.content,\n                                        points: {\n                                            total: result.total,\n                                            current_user: result.current_user\n                                        }\n                                    }\n                                }\n                        \n                                return nuevosDatos;\n                            } else {\n                                return prevDatos;\n                            }\n                        });\n                    }\n                });\n            }\n        }\n    }\n\n    return (\n        <>\n            <button onClick={() => handle_votes(\"up\")} className={`button iconed ${input_points.current_user === \"true\" ? 'voted' : ''}`}>\n                <svg className='icon'>\n                    <use xlinkHref={svg_icons+'#icon-pointer'}></use>\n                </svg>\n            </button>\n            <p>{input_points.total}</p>\n            <button onClick={() => handle_votes(\"down\")} className={`button iconed down ${input_points.current_user === \"false\" ? 'voted' : ''}`}>\n                <svg className='icon'>\n                    <use xlinkHref={svg_icons+'#icon-pointer'}></use>\n                </svg>\n            </button>\n        </>\n    )\n}\n\n/*----- Componentes locales -----*/\nconst SidePublicationViewer = ({getter_currentPost, setter_visibility, setter_currentPost, profileURL}) => {\n    const [ publicationInfo, setPublicationInfo ] = useState(null);\n    const { commonHost, auth } = useContext(AppContext);\n\n    useEffect(() => {\n        if (getter_currentPost) {\n            request_publication(auth, profileURL, getter_currentPost, (error, result) => {\n                if (error) {\n                    console.log(error);\n                } else {\n                    setPublicationInfo(result);\n                    setter_visibility(true);\n                }\n            });\n        }\n    }, [getter_currentPost]);\n\n    function close_handler () {\n        setter_visibility(false);\n        setter_currentPost(null);\n        setTimeout(() => {\n            setPublicationInfo(null);\n        }, 1000);\n    }\n\n    const PublicationCommentsHandler = ({input_commentsData}) => {\n        const local_elements = [];\n\n        if (input_commentsData.comments_data) {\n            input_commentsData.comments_data.forEach((data, index) => {\n                const localExisting_element = local_elements.find(element => element.key === index);\n                if (!localExisting_element) {\n                    local_elements.push(\n                        <div key={index} className='message__wrapper forum-style'>\n                            <div className='user-avatar msg-style'>\n                                {data.profilePic_url ?\n                                <img src={data.profilePic_url} alt=\"user_pic\" /> :\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                                </svg>}\n                            </div>\n                            <div className='msg-metadata__wrapper'>\n                                <h3>{data.author}</h3>\n                                <p>{data.createdDate}</p>\n                            </div>\n                            <div className='msg-content__wrapper'>\n                                {data.content ? <section>{data.content}</section> : ''}\n                                {data.media ? <section>{data.media}</section> : ''}\n                            </div>\n                        </div>\n                    )\n                }\n            });\n        } else {\n            local_elements.push(\n                <div className='null-contents__wrapper'>\n                    nada por aqui OwO\n                </div>\n            )\n        }\n\n        return local_elements\n    }\n\n    if (publicationInfo) {\n        return (\n            <div className={`publication-viewer__wrapper `}>\n                <div className='publication__content'>\n                    <div className='publication__header'>\n                        <div className='publication_title'>\n                            <h3>{publicationInfo.content.title}</h3>\n                            <hr className='separator full-vertical' />\n                            <p>{publicationInfo.content.createdDate}</p>\n                        </div>\n                        <div className='publication_options'>\n                            <button className='button iconed' onClick={close_handler}>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-cross'}></use>\n                                </svg>\n                            </button>\n                        </div>\n                    </div>\n                    <div className='publication__contents'>\n                        <div className='content__header'>\n                            <div className='content__author'>\n                                <div className='user-avatar publication-style'>\n                                    {publicationInfo.content.author_pic ?\n                                        <img src={commonHost+publicationInfo.content.author_pic} alt=\"user_pic\" /> :\n                                        <svg className='icon'>\n                                            <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                                        </svg>\n                                    }\n                                </div>\n                                <p className='author-label'>{publicationInfo.content.author}</p>\n                            </div>\n                            <div className='content__title'>\n                                <h2>{publicationInfo.content.title}</h2>\n                            </div>\n                            <div className='content__tags'>\n                                <TagsHandler input_tags={publicationInfo.content.tags} fullMode={true}/>\n                            </div>\n                        </div>\n                        <hr className='separator full-horizontal'/>\n                        <div className='content__text'>\n                            {publicationInfo.content.content.map((paragraph, index) => (\n                                <p key={index}>{paragraph}</p>\n                            ))}\n                        </div>\n                        <div className='content__media'>\n                            {publicationInfo.content.media ? \n                            publicationInfo.content.media.map((image, index) => (\n                                <img src={commonHost+image} alt={`Publication media ${index}`}/>\n                            )) : ''\n                            }\n                        </div>\n                        <div className='content__footer'>\n                            <div className='points-section'>\n                                <PointsHandler authen_info={auth} postsInfo_setter={setPublicationInfo} input_points={publicationInfo.content.points} input_id={publicationInfo.content.id} input_userURL={profileURL}/>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='publication__comments'>\n                        <PublicationCommentsHandler input_commentsData={publicationInfo.comments} />\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst PublicationsSection = ({ currentUserURL, setter_currentPost }) => {\n    const [ galleryElements, setGalleryElements ] = useState([]);\n    const [ listElements, setListElements ] = useState([]);\n    const [ galleryMode, setGalleryMode ] = useState(true);\n    const { commonHost, auth, userData, localCounter } = useContext(AppContext);\n    const inputTagRef = useRef(null);\n    const [ localLoading, setLocalLoading ] = useState(true);\n    const [ modeCreator, setModeCreator ] = useState(false);\n    const [ blockedCreator, setBlockedCreator ] = useState(false);\n    const [ postsInfo, setPostsInfo ] = useState([]);\n\n    const [ postUpdater, setPostUpdater ] = useState(0);\n\n    const [ currentTags, setCurrentTags ] = useState([]);\n    const [ currentTitle, setCurrentTitle ] = useState('');\n    const [ currentContent, setCurrentContent ] = useState('');\n\n    const [ currentFilter, setCurrentFilter ] = useState('');\n\n    /* Manejo de imagen */\n    const acceptedFileTypes = ['image/png', 'image/jpeg', 'image/webp'];\n    const maxSize = 5 * 1024 * 1024; // 5MB\n    const [ pictureFiles, setPictureFiles ] = useState([]);\n    const [ tempPictures, setTempPictures ] = useState([]);\n\n    const onDrop = useCallback(Files => {\n        Files.forEach((file, index) => {\n            if (files_validation(file)) {\n                const fileURL = URL.createObjectURL(file);\n                setTempPictures(prevLista => prevLista.concat(fileURL));\n                setPictureFiles(prevLista => prevLista.concat(file));\n            } else {\n                console.log(\"validacion pasada, resultado erroneo\")\n            }  \n        });\n    }, []);\n\n    const { getRootProps, getInputProps } = useDropzone({onDrop});\n\n    useEffect(() => {\n        if (!localLoading) {setLocalLoading(true)}\n        if (auth) {\n            request_userPosts(auth, currentUserURL, (error, result) => {\n                if (error) {\n                    if (error.data.error === \"NULL_POSTS\") {\n                        setGalleryElements([\n                            <div key={`null-banner`} className='empty-msg'>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-bad-list'}></use>\n                                </svg>\n                                <h2>No hay publicaciones en este perfil</h2>\n                            </div>\n                        ]);\n                        setListElements([\n                            <div key={`null-banner`} className='empty-msg'>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-bad-list'}></use>\n                                </svg>\n                                <h2>No hay publicaciones en este perfil</h2>\n                            </div>\n                        ]);\n                        setLocalLoading(false);\n                    } else {console.error(error);}\n                } else {setPostsInfo(result)}\n            });\n        } else {\n            console.warn(\"[PublicationsSection]:: Aun no carga el auth...\")\n        }\n    }, [auth, currentUserURL, postUpdater, localCounter]);\n\n    useEffect(() => {\n        if (postsInfo) {\n            if (galleryElements.find(element => element.key === 'null-banner')) {setGalleryElements([])}\n            if (listElements.find(element => element.key === 'null-banner')) {setListElements([])}\n            postsInfo.forEach((data, index) => {\n                const galleryExistingElement = galleryElements.find(element => element.key === `card-gallery-${data.id}`);\n                const listExistingElement = listElements.find(element => element.key === `card-list-${data.id}`);\n\n                if (!galleryExistingElement) {\n                    setGalleryElements(prevLista => prevLista.concat(<GalleryView key={`card-gallery-${data.id}`} setter_input_post={setPostsInfo} input_post={data} input_host={commonHost}/>));\n                }\n                if (!listExistingElement) {\n                    setListElements(prevLista => prevLista.concat(<ListView key={`card-list-${data.id}`} setter_input_post={setPostsInfo} input_post={data} input_host={commonHost}/>))\n                }\n            });\n            setLocalLoading(false)\n        }\n    }, [postsInfo, currentUserURL, setPostsInfo]);\n\n    useEffect(() => {\n        if (userData.user_url) {\n            if (userData.user_url === currentUserURL) {\n                setBlockedCreator(false);\n            } else {\n                setBlockedCreator(true)\n            }\n        }\n    }, [currentUserURL, userData])\n\n    const ListView = ({ input_post, input_host, setter_input_post }) => {\n        return (\n            <div onClick={() => setter_currentPost(input_post.id)} data-id={input_post.id} className='card__wrapper'>\n                <div className='card__content'>\n                    <div className='card__header'>\n                        <div className='post_tags'>\n                            <TagsHandler input_tags={input_post.tags}/>\n                        </div>\n                        <h3 className='post_title'>{input_post.title}</h3>\n                    </div>\n                    <div className='card__postBody'>\n                        <div className='post_content'>\n                            <div className='post_author'>\n                                <p>{input_post.author}:</p>\n                            </div>\n                            <div className='post_content-text'>\n                                <p>{input_post.content}</p>\n                            </div>\n                        </div>\n                    </div>\n                    <div className='card__footer'>\n                        <div className='post_points'>\n                            <PointsHandler postsInfo_setter={setter_input_post} authen_info={auth} input_points={input_post.points} input_id={input_post.id} input_userURL={currentUserURL}/>\n                        </div>\n                        <div className='post_comments-number'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-comment'}></use>\n                            </svg>\n                            <p>{input_post.n_comments}</p>\n                        </div>\n                        <div className='post_date'><p>{formatedDate(input_post.createdDate)}</p></div>\n                    </div>\n                </div>\n                {input_post.media ?\n                    <div className='card__media'>\n                        <img src={input_host+input_post.media[0]} alt=\"Publication main media\"/>\n                    </div> : ''\n                }\n            </div>\n        )\n    }\n\n    const GalleryView = ({ input_post, input_host, setter_input_post }) => {\n        const PicturesHandler = ({input_images}) => {\n            let local_elements = [];\n\n            input_images.forEach((data, index) => {\n                const localExisting_element = local_elements.find(element => element.key === index);\n                if (!localExisting_element) {\n                    if (local_elements.length < 4) {\n                        if (input_images.length === 1) {\n                            local_elements.push(\n                                <div key={index} className='imageSection full-column full-row'>\n                                    <img src={input_host+data} alt={`Publication media ${1}`}/>\n                                </div>\n                            )\n                        } else if (input_images.length === 2) {\n                            local_elements.push(\n                                <div key={index} className='imageSection full-column'>\n                                    <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                </div>\n                            )\n                        } else if (input_images.length === 3) {\n                            if (index === 0) {\n                                local_elements.push(\n                                    <div key={index} className='imageSection full-column'>\n                                        <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                    </div>\n                                )  \n                            } else {\n                                local_elements.push(\n                                    <div key={index} className='imageSection'>\n                                        <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                    </div>\n                                )    \n                            }\n                        } else {\n                            local_elements.push(\n                                <div key={index} className='imageSection'>\n                                    <img src={input_host+data} alt={`Publication media ${index}`}/>\n                                </div>\n                            ) \n                        }\n                    }\n                }\n            });\n            return local_elements;\n        }\n\n        return (\n            <div data-id={input_post.id} className='card__wrapper'>\n                <div onClick={() => setter_currentPost(input_post.id)} className='card__header'>\n                    <section>\n                        <div className='post_author'><p>{input_post.author}</p></div>\n                        <p className='post_date'>{formatedDate(input_post.createdDate)}</p>\n                    </section>\n                    <h3 className='post_title'>{input_post.title}</h3>\n                </div>\n                <div onClick={() => setter_currentPost(input_post.id)} className='card__postBody'>\n                    {input_post.media ?\n                        <div className='body-media'><PicturesHandler input_images={input_post.media}/></div>:\n                        <div className='post_content-text'>\n                            {input_post.content.map((paragraph, index) => (\n                                <p key={index}>{paragraph}</p>\n                            ))}\n                        </div>\n                    }\n                    <div className='post_tags'>\n                        <TagsHandler input_tags={input_post.tags}/>\n                    </div>\n                </div>\n                <div className='card__footer'>\n                    <div className='post_comments-number'>\n                        <svg className='icon'>\n                            <use xlinkHref={svg_icons+'#icon-comment'}></use>\n                        </svg>\n                        <p>{input_post.n_comments}</p>\n                    </div>\n                    <div className='post_points'>\n                        <PointsHandler postsInfo_setter={setter_input_post} authen_info={auth} input_points={input_post.points} input_id={input_post.id} input_userURL={currentUserURL}/>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n\n    const TempMediaViewer = ({input_media}) => {\n        let local_elements = [];\n\n        function delete_temp_file (index_file) {\n            const newLocal_elements = local_elements.filter((value, index, arr) => {return index !== index_file});\n            local_elements = newLocal_elements;\n\n            const newPicturesFiles = pictureFiles.filter((value, index, arr) => {return index !== index_file});\n            setPictureFiles(newPicturesFiles)\n\n            const newTempPictures = tempPictures.filter((value, index, arr) => {return index !== index_file});\n            setTempPictures(newTempPictures);\n        }\n\n        input_media.forEach((data, index) => {\n            local_elements.push(\n                <div data-id={`button-for-media-${index}`} key={index} className='imagePreview'>\n                    <button className='button iconed' onClick={() => delete_temp_file(index)}>\n                        <svg className='icon'>\n                            <use xlinkHref={svg_icons+'#icon-discard'}></use>\n                        </svg>\n                    </button>\n                    <img src={data} alt={`Temporal media ${index}`}/>\n                </div>\n            );\n        });\n        return local_elements;\n    }\n\n    const PostHandler = () => {\n        if (localLoading) {\n            return <h2>Cargando...</h2>\n        } else {\n            if (galleryMode) {\n                if (currentFilter) {\n                    const result = galleryElements.filter((tarjeta) => tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()))\n                    if (result.length > 0) {return result}\n                    else {return (\n                        <div className='empty-msg'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-binocular'}></use>\n                            </svg>\n                            <h2>No hay publicaciones que coincidan</h2>\n                        </div>\n                        )\n                    }\n                } else {return galleryElements}\n            } else {\n                if (currentFilter) {\n                    const result = listElements.filter((tarjeta) => tarjeta.props.input_post.title.toLowerCase().includes(currentFilter.toLowerCase()))\n                    if (result.length > 0) {return result}\n                    else {return (\n                        <div className='empty-msg'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-binocular'}></use>\n                            </svg>\n                            <h2>No hay publicaciones que coincidan</h2>\n                        </div>\n                        )\n                    }\n                } else {return listElements}\n            }\n        }\n    }\n\n    function handleKeyDown (event, mode=\"msg\") {\n        if (mode === \"msg\") {\n            if (event.key === 'Enter' && !event.shiftKey) {\n                event.preventDefault();\n                const message = event.target.innerText;\n                console.log(message)\n                //sendDataToServer();\n                //sendDataToServer(message);\n            }\n        } else if (mode === \"tag\") {\n            if (event.key === ' ' || event.key === 'Enter') {\n                event.preventDefault();\n                const raw_tags = event.target.value.split(' ');\n                raw_tags.forEach(tag => {\n                    if (!currentTags.includes(tag) && currentTags.length < 9) {setCurrentTags(prevLista => prevLista.concat(tag));}\n                    else if (!currentTags.length < 9) {console.warn(\"maximo 9 etiquetas!\")}\n                });\n                event.target.value = ''\n            } else if (event.key === 'Backspace') {\n                setCurrentTags(prevLista => prevLista.slice(0, -1))\n            }\n        }\n\n    };\n\n    function files_validation (element) {\n        if (pictureFiles.length > 9) {\n            console.log('maximo 9 archivos'); return false;\n        } else {\n            if (!element) {return false;} \n            else if (!acceptedFileTypes.includes(element.type)) {console.log('Archivo no válido (tipo MIME)'); return false;} \n            else if (element.size > maxSize) {console.log('Archivo excede tamaño máximo'); return false;}\n            else {return true;}\n        }\n    }\n\n    function save_newPost () {\n        if (currentTitle) {\n            if (currentTags.length > 0) {\n                if ((currentContent && currentContent !== \"\\n\") || pictureFiles.length > 0) {\n                    let local_media;\n                    if (pictureFiles.length > 0) {local_media = pictureFiles} else {local_media = null}\n\n                    let local_content;\n                    if (currentContent === \"\\n\") {local_content = null} else {local_content = currentContent}\n\n                    let local_tags = currentTags.join(\",\");\n\n                    create_newPost(auth, {\n                        title: currentTitle,\n                        content: local_content,\n                        tags: local_tags\n                    }, local_media, userData.user_url, (error, result) => {\n                        if (error) {\n                            console.log(error)\n                        } else {\n                            setPostUpdater(prevContador => prevContador + 1);\n                        }\n                    });\n                }\n                else {\n                    console.error(\"contenidos vacios\")\n                }\n            } else {\n                console.error(\"etiquetas vacias\")\n            }\n\n        } else {\n            console.error(\"titulo vacio\")\n        }\n    }\n\n    return (\n        <div className='publications__wrapper'>\n            <div className='publications__content'>\n                <div className='header'>\n                    <div className={`post-interaction ${modeCreator && currentUserURL === userData.user_url ? 'create' : 'search'}`}>\n                        <button className='button iconed' onClick={() => setModeCreator(false)}>\n                            <svg className='icon'>\n                                <use xlinkHref={`${svg_icons}` + `${modeCreator ? '#icon-cross' : '#icon-search'}`}></use>\n                            </svg>\n                        </button>\n                        {modeCreator && currentUserURL === userData.user_url ?\n                            <input className='title_mod' type='text' maxLength={100} onBlur={(e) => setCurrentTitle(e.target.value)} placeholder='titulo a crear' />:\n                            <input onChange={(e) => setCurrentFilter(e.target.value)} className='title_mod' type='text' maxLength={100} placeholder='titulo a buscar' />\n                        }\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div className='post-content__wrapper'>\n                            <div className='post-content__content' role=\"textbox\" onBlur={(e) => setCurrentContent(e.target.innerText)} onKeyDown={(e) => handleKeyDown(e)} contentEditable=\"true\"></div>\n                        </div> : ''}\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div className='add-media__wrapper'>\n                            <div {...getRootProps()} className='dropzone'>\n                                <svg className='icon'>\n                                    <use xlinkHref={svg_icons+'#icon-add-photo'}></use>\n                                </svg>\n                                <input {...getInputProps()} />\n                            </div>\n                            <div className='add-media__contens'>\n                                <TempMediaViewer input_media={tempPictures} />\n                            </div>\n                        </div>: ''}\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div className='add-emogy__wrapper'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-kiss'}></use>\n                            </svg>\n                        </div>: ''}\n                        {modeCreator && currentUserURL === userData.user_url ? <hr className='separator full-horizontal'/> : ''}\n                        {modeCreator && currentUserURL === userData.user_url ?\n                        <div onClick={() => inputTagRef.current.focus()} className='add-tags__wrapper'>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-tag'}></use>\n                            </svg>\n                            <hr className='separator bullet'/>\n                            <div className='add-tags'>\n                                <TagsHandler input_tags={currentTags} fullMode={true}/>\n                                <input ref={inputTagRef} type=\"text\" onKeyDown={(e) => handleKeyDown(e, \"tag\")} />\n                            </div>\n                        </div>: ''}\n                        <button disabled={blockedCreator} className='button interaction-option' onClick={modeCreator ? () => save_newPost() : () => setModeCreator(true)}>\n                            <svg className='icon'>\n                                <use xlinkHref={svg_icons+'#icon-edit'}></use>\n                            </svg>\n                            <p>Nueva publicacion</p>\n                        </button>\n                    </div>\n                    <div className='posts-filter'>\n                        <div className='button-dropdown'>\n                            <div className='button-dropdown__toggler'>\n                                {galleryMode ?\n                                    <div>\n                                        <svg className='icon'>\n                                            <use xlinkHref={svg_icons+'#icon-gallery-view'}></use>\n                                        </svg>\n                                        <span>Vista de galeria</span>\n                                        <svg className='icon arrow'>\n                                            <use xlinkHref={svg_icons+'#icon-arrow'}></use>\n                                        </svg>\n                                    </div> :\n                                    <div>\n                                        <svg className='icon'>\n                                            <use xlinkHref={svg_icons+'#icon-list-view'}></use>\n                                        </svg>\n                                        <span>Vista de Lista</span>\n                                        <svg className='icon arrow'>\n                                            <use xlinkHref={svg_icons+'#icon-arrow'}></use>\n                                        </svg>\n                                    </div>\n                                }\n                            </div>\n                            <div className='button-dropdown__content'>\n                                <button className='option' onClick={() => setGalleryMode(true)}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-gallery-view'}></use>\n                                    </svg>\n                                    <span>Vista de galeria</span>\n                                </button>\n                                <button className='option' onClick={() => setGalleryMode(false)}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-list-view'}></use>\n                                    </svg>\n                                    <span>Vista de Lista</span>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div className={`publications ${galleryMode ? 'gallery' : 'list'}`}>\n                    <PostHandler />\n                </div>\n            </div>\n        </div>\n    );\n}\n\nconst InformationSection = () => {\n    return(\n        <div className='publications__wrapper'>INFORMATION</div>\n    );\n}\n\nconst GallerySection = () => {\n    return(\n        <div className='publications__wrapper'>GALLERY</div>\n    );\n}\n\nconst CollectionsSection = () => {\n    return(\n        <div className='publications__wrapper'>COLLECTIONS</div>\n    ); \n}\n\n/*----- Componente central -----*/\nexport const ProfilePanel = () => {\n    const { username } = useParams();\n    const { auth, userData, commonHost } = useContext(AppContext);\n    const [ tabberLoc, setTabberLoc ] = useState('one');\n    const current_url = useLocation();\n    const [ currentPost, setCurrentPost] = useState(null);\n    const [ visiblePostViewer, setVisiblePostViewer ] = useState(false);\n    const [ profileData, setProfileData ] = useState({});\n    const [ base_url, setBase_url ] = useState('');\n    const [ blockedInteraction, setBlockedInteraction ] = useState(false);\n\n    const [ modeProfilePicUpdate, setModeProfilePicUpdate] = useState(false);\n\n    useEffect(() => {\n        if (auth) {\n            console.warn(\"en el auth...\")\n            if (profileData.user_url) {\n                console.warn(\"el profiledata contiene un url ya cargado\");\n                if (username === profileData.user_url) {\n                    console.error(`${username} === ${profileData.user_url} --> ${username === profileData.user_url}`);\n                    console.log(profileData);\n                } else {\n                    console.warn(\"solicitando datos de usuario | el username no es igual al de profiledata\")\n                    if (username === userData.user_url) {\n                        console.warn(\"el username es igual al usuario logeado\");\n                        setProfileData(userData)\n                    } else {\n                        request_ProfileData(auth, username, (error, result) => {\n                            if (error) {\n                                console.log(error)\n                            } else {\n                                setProfileData(result)\n                            }\n                        });\n                    }\n                }\n            } else {\n                console.warn(\"el username no es igual al userdata y tampoco existe url en profiledata\")\n                if (username === userData.user_url) {\n                    console.warn(\"el username es igual al usuario logeado\");\n                    setProfileData(userData)\n                } else {\n                    request_ProfileData(auth, username, (error, result) => {\n                        if (error) {\n                            console.log(error)\n                        } else {\n                            setProfileData(result)\n                        }\n                    });\n                }\n            }\n        }\n        if (username) {\n            setBase_url(`/app/profile/${username}`);\n        }\n        console.error(username);\n    }, [auth, username]);\n\n    useEffect(() => {\n        if (userData) {\n            if (userData.user_url === username) {\n                setBlockedInteraction(true);\n            } else {\n                setBlockedInteraction(false);\n            }\n        } else {\n            console.warn(\"[Profile Panel]:: aun no carga el userData\");\n        }\n    }, [username, userData]);\n\n    useEffect(() => {\n        if (base_url) {\n            if (current_url.pathname === base_url || current_url.pathname === `${base_url}/`) {setTabberLoc('one')} \n            else if (current_url.pathname === `${base_url}/info`) {setTabberLoc('two')}\n            else if (current_url.pathname === `${base_url}/gallery`) {setTabberLoc('three')}\n            else if (current_url.pathname === `${base_url}/collections`) {setTabberLoc('four')}\n        }\n    }, [base_url, current_url.pathname]);\n\n    return(\n        <div className='screen__wrapper'>\n            <div className='panel__wrapper profile-panel'>\n                <div className='profile__content'>\n                    <div className='profile-header__wrapper'>\n                        <div className='header-bg-img__wrapper'>\n                            {profileData.bg_url ?\n                                <img src={profileData.bg_url} alt=\"custom-background\" /> :\n                                <img src={default_bg} alt=\"default-background\" />\n                            }\n                        </div>\n                        <div className='user-distintion__wrapper'>\n                            <div className='user-avatar profile-style'>\n                                {profileData.profilePic_url ?\n                                    <img src={commonHost+profileData.profilePic_url} alt=\"user_pic\" /> :\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-empty-user'}></use>\n                                    </svg>\n                                }\n                                {userData.user_url === username ?\n                                <button className='button iconed'>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-camera-add'}></use>\n                                    </svg>\n                                </button> :\n                                    \"\"\n                                }\n                            </div>\n                            <div className='user-names'>\n                                <h2>{`${profileData.name} ${profileData.lastName}`}</h2>\n                                <p>HeartPoints: {profileData.heart_points}</p>\n                            </div>\n                            <div className='user-actions'>\n                                <button className='button interaction-option' disabled={blockedInteraction}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-heart-add'}></use>\n                                    </svg>\n                                    <p>Añadir</p>\n                                </button>\n                                <button className='button interaction-option secundary' disabled={blockedInteraction}>\n                                    <svg className='icon'>\n                                        <use xlinkHref={svg_icons+'#icon-chat'}></use>\n                                    </svg>\n                                    <p>Mensaje</p>\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                    <hr className='separator full-horizontal'/>\n                    <div className='profile-navigation__wrapper'>\n                        <div className={`profile-navigation__content ${tabberLoc}`}>\n                            <Link to={`/app/profile/${username}/`} className={`button tabber ${tabberLoc === 'one' ? 'current' : ''}`}>\n                                Historias\n                            </Link>\n                            <Link to={`/app/profile/${username}/info`} className={`button tabber ${tabberLoc === 'two' ? 'current' : ''}`}>\n                                Informacion\n                            </Link>\n                            <Link to={`/app/profile/${username}/gallery`} className={`button tabber ${tabberLoc === 'three' ? 'current' : ''}`}>\n                                Fotos\n                            </Link>\n                            <Link to={`/app/profile/${username}/collections`} className={`button tabber ${tabberLoc === 'four' ? 'current' : ''}`}>\n                                Colecciones\n                            </Link>\n                        </div>\n                    </div>\n                    <Routes>\n                        <Route path=\"/\" element={<PublicationsSection currentUserURL={username} setter_currentPost={setCurrentPost} />} />\n                        <Route path=\"/info\" element={<InformationSection />} />\n                        <Route path=\"/gallery\" element={<GallerySection />} />\n                        <Route path=\"/collections\" element={<CollectionsSection />} />\n                    </Routes>\n                </div>\n            </div>\n            {tabberLoc === 'one' ? \n            <div className={`sub-screen__wrapper half-screen ${visiblePostViewer ? '' : 'hidden'}`}>\n                <div className='exit-half-screen' onClick={() => setVisiblePostViewer(false)}></div>\n                <SidePublicationViewer getter_currentPost={currentPost} setter_visibility={setVisiblePostViewer} setter_currentPost={setCurrentPost} profileURL={username} />\n            </div> : ''}\n            {modeProfilePicUpdate ? \n            <div className='sub-screen__wrapper full-screen'>\n                <div>coso</div>\n            </div> : ''\n            }\n            {/* Aqui va el panel para actualizar la portada de perfil*/}\n        </div>\n    );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}