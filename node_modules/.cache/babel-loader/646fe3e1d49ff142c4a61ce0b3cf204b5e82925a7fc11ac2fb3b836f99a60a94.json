{"ast":null,"code":"import axios from 'axios';\nconst main_url = 'http://localhost:5000';\nconst config = {\n  timeout: 5000\n};\n\n/**\n * @param {{username: string, password: string}} data \n * @param {Function} callback \n */\nexport async function request_login(data, callback) {\n  try {\n    const response = await axios.post(`${main_url}/system/login`, data, config);\n    if (response) {\n      if (response.data.token && response.data.user) {\n        callback(null, response.data);\n      } else {\n        callback(response, null);\n      }\n    } else {\n      callback('noResponse', null);\n    }\n  } catch (error) {\n    if (error.response.headers['content-type'] === \"text/html; charset=utf-8\") {\n      window.open().document.write(error.response.data);\n      callback({\n        data: {\n          error: 'INTERNAL_SERVER_ERROR'\n        }\n      }, null);\n    } else if (error.response) {\n      callback(error.response, null);\n    } else {\n      callback({\n        data: {\n          error: 'SERVER_IS_OFF'\n        }\n      }, null);\n    }\n  }\n}\n\n/**\n * @param {{username: string, password: string, name: string, lastname: string, usertype: string}} data \n * @param {Function} callback \n */\nexport async function request_register(data, callback) {\n  try {\n    const response = await axios.post(`${main_url}/system/register`, data, config);\n    if (response) {\n      if (response.data.token && response.data.user) {\n        callback(null, response.data);\n      } else {\n        callback(response, null);\n      }\n    } else {\n      callback('noResponse', null);\n    }\n  } catch (error) {\n    if (error.response.headers['content-type'] === \"text/html; charset=utf-8\") {\n      window.open().document.write(error.response.data);\n      callback({\n        data: {\n          error: 'INTERNAL_SERVER_ERROR'\n        }\n      }, null);\n    } else {\n      callback(error.response, null);\n    }\n  }\n}\n\n/**\n* @param {object} filesObject provided by useDropzone\n*/\nexport async function sendFilesToServer(filesObject, callback) {\n  const formData = new FormData();\n  filesObject.forEach(file => {\n    formData.append('file', file);\n  });\n  try {\n    const response = await axios.post(`${main_url}/system/upload`, formData, {\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    if (response) {\n      if (response.data.url) {\n        window.open(main_url + response.data.url, '_blank');\n        callback(null, 'recibed_server_page');\n      } else {\n        callback(response, null);\n      }\n    } else {\n      callback('noResponse', null);\n    }\n  } catch (error) {\n    if (error.response.headers['content-type'] === \"text/html; charset=utf-8\") {\n      window.open().document.write(error.response.data);\n      callback({\n        data: {\n          error: 'INTERNAL_SERVER_ERROR'\n        }\n      }, null);\n    } else {\n      callback(error.response, null);\n    }\n  }\n}\n;","map":{"version":3,"names":["axios","main_url","config","timeout","request_login","data","callback","response","post","token","user","error","headers","window","open","document","write","request_register","sendFilesToServer","filesObject","formData","FormData","forEach","file","append","url"],"sources":["/ufs/walther22wolff/Workspace - Programming/0. Web Applications - Repok/1. NodeJS_React - Repok/heartmate_page/src/scripts/server_com.js"],"sourcesContent":["import axios from 'axios';\n\nconst main_url = 'http://localhost:5000';\nconst config = {timeout: 5000};\n\n/**\n * @param {{username: string, password: string}} data \n * @param {Function} callback \n */\nexport async function request_login (data, callback) {\n    try {\n        const response = await axios.post(`${main_url}/system/login`, data, config)\n        if (response) {\n            if (response.data.token && response.data.user) {\n                callback(null, response.data);\n            } else {\n                callback(response, null)\n            }\n        } else {\n            callback('noResponse', null)  \n        }\n    } catch (error) {\n        if (error.response.headers['content-type'] === \"text/html; charset=utf-8\") {\n            window.open().document.write(error.response.data);\n            callback({ data: {error: 'INTERNAL_SERVER_ERROR'}}, null)\n        } else if (error.response) {\n            callback(error.response, null)\n        } else {\n            callback({data: {error: 'SERVER_IS_OFF'}}, null)\n        }\n    }\n}\n\n/**\n * @param {{username: string, password: string, name: string, lastname: string, usertype: string}} data \n * @param {Function} callback \n */\nexport async function request_register (data, callback) {\n    try {\n        const response = await axios.post(`${main_url}/system/register`, data, config)\n        if (response) {\n            if (response.data.token && response.data.user) {\n                callback(null, response.data);\n            } else {\n                callback(response, null)\n            }\n        } else {\n            callback('noResponse', null)\n        }\n    } catch (error) {\n        if (error.response.headers['content-type'] === \"text/html; charset=utf-8\") {\n            window.open().document.write(error.response.data);\n            callback({ data: {error: 'INTERNAL_SERVER_ERROR'}}, null)\n        } else {\n            callback(error.response, null)\n        }\n    }\n}\n\n/**\n* @param {object} filesObject provided by useDropzone\n*/\nexport async function sendFilesToServer (filesObject, callback) {\n    const formData = new FormData();\n    filesObject.forEach(file => {\n        formData.append('file', file);\n    });\n\n    try {\n        const response = await axios.post(`${main_url}/system/upload`, formData, {headers: {'Content-Type': 'multipart/form-data'}});\n        \n        if (response) {\n            if (response.data.url) {\n                window.open(main_url+response.data.url, '_blank');\n                callback(null, 'recibed_server_page')\n            } else {\n                callback(response, null)\n            }\n        } else {\n            callback('noResponse', null)\n        }\n    } catch (error) {\n        if (error.response.headers['content-type'] === \"text/html; charset=utf-8\") {\n            window.open().document.write(error.response.data);\n            callback({ data: {error: 'INTERNAL_SERVER_ERROR'}}, null)\n        } else {\n            callback(error.response, null)\n        }\n    }\n};"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,QAAQ,GAAG,uBAAuB;AACxC,MAAMC,MAAM,GAAG;EAACC,OAAO,EAAE;AAAI,CAAC;;AAE9B;AACA;AACA;AACA;AACA,OAAO,eAAeC,aAAaA,CAAEC,IAAI,EAAEC,QAAQ,EAAE;EACjD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,GAAGP,QAAQ,eAAe,EAAEI,IAAI,EAAEH,MAAM,CAAC;IAC3E,IAAIK,QAAQ,EAAE;MACV,IAAIA,QAAQ,CAACF,IAAI,CAACI,KAAK,IAAIF,QAAQ,CAACF,IAAI,CAACK,IAAI,EAAE;QAC3CJ,QAAQ,CAAC,IAAI,EAAEC,QAAQ,CAACF,IAAI,CAAC;MACjC,CAAC,MAAM;QACHC,QAAQ,CAACC,QAAQ,EAAE,IAAI,CAAC;MAC5B;IACJ,CAAC,MAAM;MACHD,QAAQ,CAAC,YAAY,EAAE,IAAI,CAAC;IAChC;EACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACJ,QAAQ,CAACK,OAAO,CAAC,cAAc,CAAC,KAAK,0BAA0B,EAAE;MACvEC,MAAM,CAACC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAACC,KAAK,CAACL,KAAK,CAACJ,QAAQ,CAACF,IAAI,CAAC;MACjDC,QAAQ,CAAC;QAAED,IAAI,EAAE;UAACM,KAAK,EAAE;QAAuB;MAAC,CAAC,EAAE,IAAI,CAAC;IAC7D,CAAC,MAAM,IAAIA,KAAK,CAACJ,QAAQ,EAAE;MACvBD,QAAQ,CAACK,KAAK,CAACJ,QAAQ,EAAE,IAAI,CAAC;IAClC,CAAC,MAAM;MACHD,QAAQ,CAAC;QAACD,IAAI,EAAE;UAACM,KAAK,EAAE;QAAe;MAAC,CAAC,EAAE,IAAI,CAAC;IACpD;EACJ;AACJ;;AAEA;AACA;AACA;AACA;AACA,OAAO,eAAeM,gBAAgBA,CAAEZ,IAAI,EAAEC,QAAQ,EAAE;EACpD,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,GAAGP,QAAQ,kBAAkB,EAAEI,IAAI,EAAEH,MAAM,CAAC;IAC9E,IAAIK,QAAQ,EAAE;MACV,IAAIA,QAAQ,CAACF,IAAI,CAACI,KAAK,IAAIF,QAAQ,CAACF,IAAI,CAACK,IAAI,EAAE;QAC3CJ,QAAQ,CAAC,IAAI,EAAEC,QAAQ,CAACF,IAAI,CAAC;MACjC,CAAC,MAAM;QACHC,QAAQ,CAACC,QAAQ,EAAE,IAAI,CAAC;MAC5B;IACJ,CAAC,MAAM;MACHD,QAAQ,CAAC,YAAY,EAAE,IAAI,CAAC;IAChC;EACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACJ,QAAQ,CAACK,OAAO,CAAC,cAAc,CAAC,KAAK,0BAA0B,EAAE;MACvEC,MAAM,CAACC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAACC,KAAK,CAACL,KAAK,CAACJ,QAAQ,CAACF,IAAI,CAAC;MACjDC,QAAQ,CAAC;QAAED,IAAI,EAAE;UAACM,KAAK,EAAE;QAAuB;MAAC,CAAC,EAAE,IAAI,CAAC;IAC7D,CAAC,MAAM;MACHL,QAAQ,CAACK,KAAK,CAACJ,QAAQ,EAAE,IAAI,CAAC;IAClC;EACJ;AACJ;;AAEA;AACA;AACA;AACA,OAAO,eAAeW,iBAAiBA,CAAEC,WAAW,EAAEb,QAAQ,EAAE;EAC5D,MAAMc,QAAQ,GAAG,IAAIC,QAAQ,CAAC,CAAC;EAC/BF,WAAW,CAACG,OAAO,CAACC,IAAI,IAAI;IACxBH,QAAQ,CAACI,MAAM,CAAC,MAAM,EAAED,IAAI,CAAC;EACjC,CAAC,CAAC;EAEF,IAAI;IACA,MAAMhB,QAAQ,GAAG,MAAMP,KAAK,CAACQ,IAAI,CAAC,GAAGP,QAAQ,gBAAgB,EAAEmB,QAAQ,EAAE;MAACR,OAAO,EAAE;QAAC,cAAc,EAAE;MAAqB;IAAC,CAAC,CAAC;IAE5H,IAAIL,QAAQ,EAAE;MACV,IAAIA,QAAQ,CAACF,IAAI,CAACoB,GAAG,EAAE;QACnBZ,MAAM,CAACC,IAAI,CAACb,QAAQ,GAACM,QAAQ,CAACF,IAAI,CAACoB,GAAG,EAAE,QAAQ,CAAC;QACjDnB,QAAQ,CAAC,IAAI,EAAE,qBAAqB,CAAC;MACzC,CAAC,MAAM;QACHA,QAAQ,CAACC,QAAQ,EAAE,IAAI,CAAC;MAC5B;IACJ,CAAC,MAAM;MACHD,QAAQ,CAAC,YAAY,EAAE,IAAI,CAAC;IAChC;EACJ,CAAC,CAAC,OAAOK,KAAK,EAAE;IACZ,IAAIA,KAAK,CAACJ,QAAQ,CAACK,OAAO,CAAC,cAAc,CAAC,KAAK,0BAA0B,EAAE;MACvEC,MAAM,CAACC,IAAI,CAAC,CAAC,CAACC,QAAQ,CAACC,KAAK,CAACL,KAAK,CAACJ,QAAQ,CAACF,IAAI,CAAC;MACjDC,QAAQ,CAAC;QAAED,IAAI,EAAE;UAACM,KAAK,EAAE;QAAuB;MAAC,CAAC,EAAE,IAAI,CAAC;IAC7D,CAAC,MAAM;MACHL,QAAQ,CAACK,KAAK,CAACJ,QAAQ,EAAE,IAAI,CAAC;IAClC;EACJ;AACJ;AAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}